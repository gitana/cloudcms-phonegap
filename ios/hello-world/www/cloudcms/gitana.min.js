/*
Copyright 2011 Gitana Software, Inc.

Licensed under the Apache License, Version 2.0 (the "License"); 
you may not use this file except in compliance with the License. 

You may obtain a copy of the License at 
	http://www.apache.org/licenses/LICENSE-2.0 

Unless required by applicable law or agreed to in writing, software 
distributed under the License is distributed on an "AS IS" BASIS, 
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
See the License for the specific language governing permissions and 
limitations under the License. 

For more information, please contact Gitana Software, Inc. at this
address:

  info@gitanasoftware.com
*/
if(typeof window==="undefined"){window={setTimeout:function(A,B){setTimeout(A,B)}}}var Base=function(){};Base.extend=function(B,E){var F=Base.prototype.extend;Base._prototyping=true;var D=new this;F.call(D,B);D.base=function(){};delete Base._prototyping;var C=D.constructor;var A=D.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==A){this._constructing=true;C.apply(this,arguments);delete this._constructing}else{if(arguments[0]!=null){return(arguments[0].extend||F).call(arguments[0],D)}}}};A.ancestor=this;A.extend=this.extend;A.forEach=this.forEach;A.implement=this.implement;A.prototype=D;A.toString=this.toString;A.valueOf=function(G){return(G=="object")?A:C.valueOf()};F.call(A,E);if(typeof A.init=="function"){A.init()}return A};Base.prototype={extend:function(B,H){if(arguments.length>1){var E=this[B];if(E&&(typeof H=="function")&&(!E.valueOf||E.valueOf()!=H.valueOf())&&/\bbase\b/.test(H)){var A=H.valueOf();H=function(){var K=this.base||Base.prototype.base;this.base=E;var J=A.apply(this,arguments);this.base=K;return J};H.valueOf=function(J){return(J=="object")?H:A};H.toString=Base.toString}this[B]=H}else{if(B){var G=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){G=this.extend||G}var D={toSource:null};var F=["constructor","toString","valueOf"];var C=Base._prototyping?0:1;while(I=F[C++]){if(B[I]!=D[I]){G.call(this,I,B[I])}}for(var I in B){if(!D[I]){G.call(this,I,B[I])}}}}return this}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(A,D,C){for(var B in A){if(this.prototype[B]===undefined){D.call(C,A[B],B,A)}}},implement:function(){for(var A=0;A<arguments.length;A++){if(typeof arguments[A]=="function"){arguments[A](this.prototype)}else{this.prototype.extend(arguments[A])}}return this},toString:function(){return String(this.valueOf())}});if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(A){Gitana=Base.extend({constructor:function(D){var B=this;this.VERSION="0.2";if(!D){D={}}this.baseURL="/proxy";if(D.baseURL){this.baseURL=D.baseURL}this.locale=null;if(D.locale){this.locale=D.locale}this.applicationInfo={};this.stackInfo={};var C={};if(Gitana.DEFAULT_CONFIG){Gitana.copyInto(C,Gitana.DEFAULT_CONFIG)}if(D.clientId){C.clientId=D.clientId}if(!C.clientId&&D.clientKey){C.clientId=D.clientKey}if(D.clientSecret){C.clientSecret=D.clientSecret}if(this.baseURL){C.baseURL=this.baseURL;C.tokenURL="/oauth/token"}C.requestedScope="api";this.updateOptions=function(E){if(E){Gitana.copyInto(C,E)}};this.resetHttp=function(E){var F={};Gitana.copyInto(F,C);if(E){Gitana.copyInto(F,E)}B.http=new Gitana.OAuth2Http(F)};this.setAuthInfo=function(E){this.authInfo=E};this.setStackInfo=function(E){this.stackInfo=E};this.setApplicationInfo=function(E){this.applicationInfo=E}},getAuthInfo:function(){return this.authInfo},getStackInfo:function(){return this.stackInfo},getApplicationInfo:function(){return this.applicationInfo},setLocale:function(B){this.locale=B},getLocale:function(){return this.locale},defaultFailureCallback:function(B){if(this.debug){if(!(typeof console==="undefined")){var E="Received bad http state ("+B.status+")";var D=null;var F=B.responseText;if(F){var C=JSON.parse(F);if(C.message){E=E+": "+C.message}}if(C.stacktrace){D=C.stacktrace}console.log(E);if(D){console.log(D)}}}},ajax:function(B,C,K,H,G,E,D){var I=this;if(!G){G={}}if(B==null){B="GET"}B=B.toUpperCase();var M=false;if(K=="application/json"){M=true}if((B=="POST"||B=="PUT")){G["Content-Type"]=K;if(!K){Gitana.debug("Performing method: "+B+" but missing content type");return }}var J=H;if(M){if(B=="PUT"||B=="POST"){if(!H){H={}}}if(!Gitana.isString(H)){J=Gitana.stringify(H)}}if(C.substring(0,1)=="/"){if(!Gitana.isUndefined(A.location)){var L=A.location.protocol+"//"+A.location.host;if(A.location.host.indexOf(":")==-1){L+=":"+A.location.port}C=L+C}else{throw new Error("Relative URL not supported outside of the browser: "+C)}}var F={method:B,url:C,data:J,headers:G,success:E,failure:D};this.http.request(F);return this},gitanaRequest:function(B,C,J,N,K,G,D){if(Gitana.startsWith(C,"/")){C=this.baseURL+C}if(!D){D=this.defaultFailureCallback}var M=function(P,Q){if(G){var O=P.text;if(N=="application/json"){O=new Gitana.Response(JSON.parse(O))}G(O)}};var F=function(Q,V){if(D){var P={};P.statusText=V.statusText;P.status=V.status;var S=null;var R=null;var O=Q.text;if(N=="application/json"){try{var U=new Gitana.Response(JSON.parse(O));if(U.message){S=U.message}if(U.stacktrace){R=U.stacktrace}}catch(T){}}if(S){P.message=S}if(R){P.stacktrace=R}D(P)}};var H={};if(this.locale){H["accept-language"]=this.locale}if(!J){J={}}if(Gitana.isEmpty(J.metadata)){J.metadata=true}if(Gitana.isEmpty(J.full)){J.full=true}var E=new Date().getTime();J.cb=E;for(var L in J){var I=J[L];if(Gitana.isFunction(I)){I=I.call()}else{if(Gitana.isString(I)){}else{if(Gitana.isNumber(I)){}else{I=escape(Gitana.stringify(I,false))}}}if(C.indexOf("?")>-1){C=C+"&"+L+"="+I}else{C=C+"?"+L+"="+I}}return this.ajax(B,C,N,K,H,M,F)},gitanaGet:function(C,E,B,D){return this.gitanaRequest("GET",C,E,"application/json",null,B,D)},gitanaDownload:function(C,E,B,D){return this.gitanaRequest("GET",C,E,null,null,B,D)},gitanaPost:function(C,F,D,B,E){return this.gitanaRequest("POST",C,F,"application/json",D,B,E)},gitanaUpload:function(C,F,G,D,B,E){return this.gitanaRequest("POST",C,F,G,D,B,E)},gitanaPut:function(C,F,D,B,E){return this.gitanaRequest("PUT",C,F,"application/json",D,B,E)},gitanaDelete:function(C,E,B,D){return this.gitanaRequest("DELETE",C,E,"application/json",null,B,D)},getFactory:function(){return new Gitana.ObjectFactory()},authenticate:function(F,D){var G=this;var C=new Gitana.Cluster(this,{});var H=function(){var I=this;if(F.code){F.authorizationFlow=Gitana.OAuth2Http.AUTHORIZATION_CODE;G.resetHttp(F);Gitana.deleteCookie("GITANA_TICKET","/");G.currentPlatform=null;G.gitanaGet("/auth/info",{},function(J){var K=new Gitana.AuthInfo(J);G.setAuthInfo(K);G.currentPlatform=B;Gitana.deleteCookie("JSESSIONID","/");Chain(B).then(function(){this.reload().then(function(){B.loadFrom(this);I.next()})})},function(J){if(D){D.call(I,J)}})}else{if(F.username){F.authorizationFlow=Gitana.OAuth2Http.PASSWORD;G.resetHttp(F);Gitana.deleteCookie("GITANA_TICKET","/");G.currentPlatform=null;G.gitanaGet("/auth/info",{},function(J){var K=new Gitana.AuthInfo(J);G.setAuthInfo(K);G.currentPlatform=B;Chain(B).then(function(){this.reload().then(function(){B.loadFrom(this);I.next()})})},function(J){if(D){D.call(I,J)}})}else{if(F.accessToken){F.authorizationFlow=Gitana.OAuth2Http.TOKEN;G.resetHttp(F);Gitana.deleteCookie("GITANA_TICKET","/");G.currentPlatform=null;G.gitanaGet("/auth/info",{},function(J){var K=new Gitana.AuthInfo(J);G.setAuthInfo(K);G.currentPlatform=B;Gitana.deleteCookie("JSESSIONID","/");Chain(B).then(function(){this.reload().then(function(){B.loadFrom(this);I.next()})})},function(J){if(D){D.call(I,J)}})}else{if(F.cookie){F.authorizationFlow=Gitana.OAuth2Http.COOKIE;G.resetHttp(F);G.currentPlatform=null;G.gitanaGet("/auth/info",{},function(J){var K=new Gitana.AuthInfo(J);G.setAuthInfo(K);G.currentPlatform=B;Gitana.deleteCookie("JSESSIONID","/");Chain(B).then(function(){this.reload().then(function(){B.loadFrom(this);I.next()})})},function(J){if(D){D.call(I,J)}})}else{throw new Error("Unsupported authentication flow - you must provide either a username, authorization code or access token")}}}}};var E=function(J,K){var I=this;new Gitana.Http().request({url:"/proxy/pub/driver?uri="+Gitana.Http.URLEncode(J),success:function(M){var O=JSON.parse(M.text);var N={clientId:O.clientKey};I.getDriver().updateOptions(N);var P={};if(O.stackId){P.id=O.stackId}if(O.stackDataStores){P.datastores=O.stackDataStores}I.getDriver().setStackInfo(P);var L={};if(O.applicationId){L.id=O.applicationId}I.getDriver().setApplicationInfo(L);if(K){K.call(I)}}})};var B=this.getFactory().platform(C);return Chain(B).then(function(){var I=this;if(Gitana.autoConfigUri){E.call(I,Gitana.autoConfigUri,function(){H.call(I)})}else{H.call(I)}return false})},clearAuthentication:function(){this.resetHttp();Gitana.deleteCookie("GITANA_TICKET","/");this.currentPlatform=null}});Gitana.EVERYONE={name:"everyone",type:"GROUP"};Gitana.DEFAULT_CONFIG={clientId:null,clientSecret:null};Gitana.autoConfigUri=false;Gitana.toCopyDependencyChain=function(B){var C=[];if(B.getType()=="node"){C=C.concat(Gitana.toCopyDependencyChain(B.getBranch()))}else{if(B.getType()=="branch"){C=C.concat(Gitana.toCopyDependencyChain(B.getRepository()))}else{if(B.getType()=="platform"){}else{C=C.concat(Gitana.toCopyDependencyChain(B.getPlatform()))}}}C.push(Gitana.toDependencyObject(B));return C};Gitana.toDependencyObject=function(B){return{typeId:B.getType(),id:B.getId()}};Gitana.TypedIDConstants={};Gitana.TypedIDConstants.TYPE_APPLICATION="application";Gitana.TypedIDConstants.TYPE_EMAIL="email";Gitana.TypedIDConstants.TYPE_EMAIL_PROVIDER="emailprovider";Gitana.TypedIDConstants.TYPE_REGISTRATION="registration";Gitana.TypedIDConstants.TYPE_SETTINGS="settings";Gitana.TypedIDConstants.TYPE_CLUSTER="cluster";Gitana.TypedIDConstants.TYPE_JOB="job";Gitana.TypedIDConstants.TYPE_LOG_ENTRY="logEntry";Gitana.TypedIDConstants.TYPE_DIRECTORY="directory";Gitana.TypedIDConstants.TYPE_IDENTITY="identity";Gitana.TypedIDConstants.TYPE_DOMAIN="domain";Gitana.TypedIDConstants.TYPE_DOMAIN_GROUP="group";Gitana.TypedIDConstants.TYPE_DOMAIN_USER="user";Gitana.TypedIDConstants.TYPE_PLATFORM="platform";Gitana.TypedIDConstants.TYPE_AUTHENTICATION_GRANT="authenticationGrant";Gitana.TypedIDConstants.TYPE_BILLING_PROVIDER_CONFIGURATION="billingProviderConfiguration";Gitana.TypedIDConstants.TYPE_CLIENT="client";Gitana.TypedIDConstants.TYPE_STACK="stack";Gitana.TypedIDConstants.TYPE_REGISTRAR="registrar";Gitana.TypedIDConstants.TYPE_METER="meter";Gitana.TypedIDConstants.TYPE_PLAN="plan";Gitana.TypedIDConstants.TYPE_TENANT="tenant";Gitana.TypedIDConstants.TYPE_REPOSITORY="repository";Gitana.TypedIDConstants.TYPE_ASSOCIATION="association";Gitana.TypedIDConstants.TYPE_BRANCH="branch";Gitana.TypedIDConstants.TYPE_CHANGESET="changeset";Gitana.TypedIDConstants.TYPE_NODE="node";Gitana.TypedIDConstants.TYPE_VAULT="vault";Gitana.TypedIDConstants.TYPE_ARCHIVE="archive";Gitana.TypedIDConstants.TYPE_WAREHOUSE="warehouse";Gitana.TypedIDConstants.TYPE_INTERACTION="interaction";Gitana.TypedIDConstants.TYPE_INTERACTION_APPLICATION="interactionApplication";Gitana.TypedIDConstants.TYPE_INTERACTION_NODE="interactionNode";Gitana.TypedIDConstants.TYPE_INTERACTION_PAGE="interactionPage";Gitana.TypedIDConstants.TYPE_INTERACTION_REPORT="interactionReport";Gitana.TypedIDConstants.TYPE_INTERACTION_REPORT_ENTRY="interactionReportEntry";Gitana.TypedIDConstants.TYPE_INTERACTION_SESSION="interactionSession";Gitana.TypedIDConstants.TYPE_INTERACTION_USER="interactionUser";Gitana.TypedIDConstants.TYPE_WEB_HOST="webhost";Gitana.TypedIDConstants.TYPE_AUTO_CLIENT_MAPPING="autoClientMapping";Gitana.handleJobCompletion=function(F,D,C,E){var B=function(){return Chain(D).readJob(C).then(function(){if(!E||(E&&(this.getState()=="FINISHED"||this.getState()=="ERROR"))){F.loadFrom(this);F.next()}else{A.setTimeout(B,250)}})};A.setTimeout(B,250)};A.Gitana=Gitana})(window);(function(A){Gitana.Error=function(){};Gitana.Error.prototype=new Error();Gitana.Error.prototype.constructor=Gitana.Error}(this));(function(C){Gitana.Http=Base.extend({constructor:function(){this.invoke=function(M){var D=M.method||"GET";var E=M.url;var H=M.data;var G=M.headers||{};var K=M.success||function(){};var F=M.failure||function(){};G.Accept="application/json";var L=Gitana.Http.Request();L.onreadystatechange=function(){if(L.readyState===4){var U=/^(.*?):\s*(.*?)\r?$/mg,S=G,O={},V="",R;if(!!L.getAllResponseHeaders){V=L.getAllResponseHeaders();while((R=U.exec(V))){O[R[1]]=R[2]}}else{if(!!L.getResponseHeaders){V=L.getResponseHeaders();for(var P=0,T=V.length;P<T;++P){O[V[P][0]]=V[P][1]}}}var Q=false;if("Content-Type" in O){if(O["Content-Type"]=="text/xml"){Q=true}}var N={text:L.responseText,xml:(Q?L.responseXML:""),requestHeaders:S,responseHeaders:O};if((L.status>=200&&L.status<=226)||L.status==304||L.status===0){K(N,L)}else{if(L.status>=400&&L.status!==0){F(N,L)}else{if(L.status>=300&&L.status<=303){F(N,L)}}}}};L.open(D,E,true);L.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var I in G){L.setRequestHeader(I,G[I])}try{L.send(H)}catch(J){console.log(J)}}},request:function(D){return this.invoke(D)}});Gitana.Http.Request=function(){var E;if(typeof C.Titanium!=="undefined"&&typeof C.Titanium.Network.createHTTPClient!="undefined"){E=C.Titanium.Network.createHTTPClient()}else{if(typeof require!=="undefined"){var D=require("xmlhttprequest").XMLHttpRequest;E=new D()}else{E=new C.XMLHttpRequest()}}return E};var B=function(){};B.prototype={join:function(D){D=D||"";return this.values().join(D)},keys:function(){var F,D=[],E=this;for(F in E){if(E.hasOwnProperty(F)){D.push(F)}}return D},values:function(){var F,D=[],E=this;for(F in E){if(E.hasOwnProperty(F)){D.push(E[F])}}return D},shift:function(){throw"not implemented"},unshift:function(){throw"not implemented"},push:function(){throw"not implemented"},pop:function(){throw"not implemented"},sort:function(){throw"not implemented"},ksort:function(H){var D=this,G=D.keys(),F,I,E;if(H==undefined){G.sort()}else{G.sort(H)}for(F=0;F<G.length;F++){E=G[F];I=D[E];delete D[E];D[E]=I}return D},toObject:function(){var F={},E,D=this;for(E in D){if(D.hasOwnProperty(E)){F[E]=D[E]}}return F}};var A=function(H){var E=arguments,D=E.callee,G=E.length,F,I=this;if(!(this instanceof D)){return new D(H)}for(F in H){if(H.hasOwnProperty(F)){I[F]=H[F]}}return I};A.prototype=new B;Gitana.Http.URI=function(E){var L=arguments,J=L.callee,K,F,N,H,O,M,I,D=/^([^:\/?#]+?:\/\/)*([^\/:?#]*)?(:[^\/?#]*)*([^?#]*)(\?[^#]*)?(#(.*))*/,G=this;if(!(this instanceof J)){return new J(E)}G.scheme="";G.host="";G.port="";G.path="";G.query=new Gitana.Http.QueryString();G.anchor="";if(E!==null){K=E.match(D);F=K[1];N=K[2];H=K[3];O=K[4];M=K[5];I=K[6];F=(F!==undefined)?F.replace("://","").toLowerCase():"http";H=(H?H.replace(":",""):(F==="https"?"443":"80"));F=(F=="http"&&H==="443"?"https":F);M=M?M.replace("?",""):"";I=I?I.replace("#",""):"";if((F==="https"&&H!=="443")||(F==="http"&&H!=="80")){N=N+":"+H}G.scheme=F;G.host=N;G.port=H;G.path=O||"/";G.query.setQueryParams(M);G.anchor=I||""}};Gitana.Http.URI.prototype={scheme:"",host:"",port:"",path:"",query:"",anchor:"",toString:function(){var D=this,E=D.query+"";return D.scheme+"://"+D.host+D.path+(E!=""?"?"+E:"")+(D.anchor!==""?"#"+D.anchor:"")}};Gitana.Http.QueryString=function(I){var F=arguments,E=F.callee,H=F.length,G,D=this;if(!(this instanceof E)){return new E(I)}if(I!=undefined){for(G in I){if(I.hasOwnProperty(G)){D[G]=I[G]}}}return D};Gitana.Http.QueryString.prototype=new A();Gitana.Http.QueryString.prototype.toString=function(){var F,D=this,H=[],E="",I="",G=Gitana.Http.URLEncode;D.ksort();for(F in D){if(D.hasOwnProperty(F)){if(F!=undefined&&D[F]!=undefined){I=G(F)+"="+G(D[F]);H.push(I)}}}if(H.length>0){E=H.join("&")}return E};Gitana.Http.QueryString.prototype.setQueryParams=function(J){var G=arguments,I=G.length,H,F,K,D=this,E;if(I==1){if(typeof J==="object"){for(H in J){if(J.hasOwnProperty(H)){D[H]=J[H]}}}else{if(typeof J==="string"){F=J.split("&");for(H=0,K=F.length;H<K;H++){E=F[H].split("=");D[E[0]]=E[1]}}}}else{for(H=0;H<arg_length;H+=2){D[G[H]]=G[H+1]}}};Gitana.Http.URLEncode=function(D){function G(L){var K=L.toString(16).toUpperCase();if(K.length<2){K=0+K}return"%"+K}if(!D){return""}D=D+"";var J=/[ \r\n!*"'();:@&=+$,\/?%#\[\]<>{}|`^\\\u0080-\uffff]/,F=D.length,E,I=D.split(""),H;for(E=0;E<F;E++){if(H=I[E].match(J)){H=H[0].charCodeAt(0);if(H<128){I[E]=G(H)}else{if(H<2048){I[E]=G(192+(H>>6))+G(128+(H&63))}else{if(H<65536){I[E]=G(224+(H>>12))+G(128+((H>>6)&63))+G(128+(H&63))}else{if(H<2097152){I[E]=G(240+(H>>18))+G(128+((H>>12)&63))+G(128+((H>>6)&63))+G(128+(H&63))}}}}}}return I.join("")};Gitana.Http.URLDecode=function(D){if(!D){return""}return D.replace(/%[a-fA-F0-9]{2}/ig,function(E){return String.fromCharCode(parseInt(E.replace("%",""),16))})}}(this));(function(A){Gitana.OAuth2Http=Gitana.Http.extend({constructor:function(F){var D=this;this.accessToken=null;this.refreshToken=null;this.cookieMode=false;this.grantedScope=null;this.expiresIn=null;this.grantTime=null;this.error=null;this.errorDescription=null;this.errorUri=null;var C="/oauth/token";if(F.tokenURL){C=F.tokenURL}var G=null;if(F.baseURL){G=F.baseURL}var B=F.clientId;var E=F.clientSecret;this.authorizationFlow=F.authorizationFlow||Gitana.OAuth2Http.AUTHORIZATION_CODE;if(F.requestedScope){this.requestedScope=F.requestedScope}if(this.authorizationFlow==Gitana.OAuth2Http.AUTHORIZATION_CODE){this.code=F.code;this.redirectUri=F.redirectUri}if(this.authorizationFlow==Gitana.OAuth2Http.PASSWORD){this.username=F.username;if(F.password){this.password=F.password}else{this.password=""}}if(this.authorizationFlow==Gitana.OAuth2Http.TOKEN){this.accessToken=F.accessToken}if(this.authorizationFlow==Gitana.OAuth2Http.COOKIE){this.cookieMode=true}this.getClientAuthorizationHeader=function(){var H=B+":";if(E){H+=E}return"Basic "+Gitana.btoa(H)};this.getBearerAuthorizationHeader=function(){return"Bearer "+D.accessToken};this.getPrefixedTokenURL=function(){return this.getPrefixedURL(C)};this.getPrefixedURL=function(I){var H=I;if(G&&Gitana.startsWith(I,"/")){H=G+I}return H};this.base()},request:function(D){var C=this;var B=function(J,G){var I=function(L){var M=JSON.parse(L.text);if(L.error){C.error=M.error;C.errorDescription=M.error_description;C.errorUri=M.error_uri}else{C.accessToken=M.access_token;C.refreshToken=M.refresh_token;C.expiresIn=M.expires_in;C.grantedScope=M.scope;C.grantTime=new Date().getTime()}J()};var H={success:I,failure:G,headers:{Authorization:C.getClientAuthorizationHeader()},url:C.getPrefixedTokenURL()};var K="grant_type="+Gitana.Http.URLEncode(C.authorizationFlow);if(C.requestedScope){K+="&scope="+Gitana.Http.URLEncode(C.requestedScope)}if(C.authorizationFlow==Gitana.OAuth2Http.AUTHORIZATION_CODE){K+="&code="+Gitana.Http.URLEncode(C.code);if(C.redirectUri){K+="&redirect_uri="+Gitana.Http.URLEncode(C.redirectUri)}}else{if(C.authorizationFlow==Gitana.OAuth2Http.PASSWORD){K+="&username="+Gitana.Http.URLEncode(C.username);if(C.password){K+="&password="+Gitana.Http.URLEncode(C.password)}}}if(H.url.indexOf("?")>-1){H.url=H.url+"&"+K}else{H.url=H.url+"?"+K}C.invoke(H)};var F=function(J,G){var I=function(K){var L=JSON.parse(K.text);if(K.error){C.error=L.error;C.errorDescription=L.error_description;C.errorUri=L.error_uri}else{C.accessToken=L.access_token;C.refreshToken=L.refresh_token;C.expiresIn=L.expires_in;C.grantedScope=L.scope;C.grantTime=new Date().getTime()}J()};var H={success:I,failure:G,headers:{Authorization:C.getClientAuthorizationHeader()},url:C.getPrefixedTokenURL()};C.invoke(H)};var E=function(I){var G=function(K){D.success(K)};var H=function(K,L){if(I){if(K.code==401){F(function(){E(false)},function(){D.failure(K,L)})}else{D.failure(K,L)}}else{D.failure(K,L)}};var J={};Gitana.copyInto(J,D);J.success=G;J.failure=H;if(!J.headers){J.headers={}}if(!C.cookieMode){J.headers.Authorization=C.getBearerAuthorizationHeader()}J.url=C.getPrefixedURL(J.url);C.invoke(J)};if(!C.accessToken&&!this.cookieMode){if(!C.refreshToken){B(function(){E(true)},function(G,H){D.failure(G,H)})}else{F(function(){E(true)},function(G,H){D.failure(G,H)})}}else{E(true)}}})}(this));Gitana.OAuth2Http.PASSWORD="password";Gitana.OAuth2Http.AUTHORIZATION_CODE="authorization_code";Gitana.OAuth2Http.TOKEN="token";Gitana.OAuth2Http.COOKIE="cookie";(function(A){Chain=function(C){var B=function(){if(!Chain.idCount){Chain.idCount=0}return"chain-"+Chain.idCount++};if(!C){C={}}var D;D=Chain.proxy(C);D.queue=[];D.response=null;D.waiting=false;D.id=B();D.parent=null;D.then=function(H){var G=this;var F=false;if(Gitana.isArray(H)){var K=H;var E=function(){var P=0;var O=K.length;var Q=function(){P++;if(P==O){G.next()}};for(var M=0;M<K.length;M++){var N=K[M];var L=function(S){var R=Chain();R.waiting=true;R.subchain(G).then(function(){S.call(this)});R.then(function(){Q()});R.waiting=false;R.run()};L(N)}return false};var J=this.subchain(null,true);J.queue.push(E);H=J}else{if(Gitana.isFunction(H)){var J=this.subchain(null,true);J.queue.push(H);H=J;F=true}}this.queue.push(H);if(F&&!this.waiting){var I=this;while(I.parent){I=I.parent}if(!I.waiting){I.run()}}return this};D.run=function(){var F=this;if(this.queue.length==0||this.waiting){return this}this.waiting=true;var H=this.queue.shift();if(Gitana.isFunction(H)){var J=H;var E=null;var G=null;if(this.parent){E=this.parent.response;if(this.parent.parent){G=this.parent.parent.response}}A.setTimeout(function(){var K=J.call(F,E,G);if(K!==false){F.next(K)}},0)}else{var I=H;I.response=this.response;if(I.beforeChainRun){I.beforeChainRun.call(I)}I.run()}return this};D.subchain=function(E,G){if(!E){E=this}var F=Chain(E);F.parent=this;if(F.beforeChainRun){F.beforeChainRun.call(F)}if(!G){this.then(F)}return F};D.next=function(E){if(typeof E!=="undefined"){this.response=E}this.waiting=false;if(this.queue.length==0){if(this.parent){var F=this.response;this.parent.response=F;delete this.response;this.parent.next()}this.parent=null;this.queue=[]}else{this.run()}};D.wait=function(E){return this.then(function(){var F=function(G){return function(){G.next()}}(this);A.setTimeout(F,E);return false})};D.trap=function(E){this.errorHandler=E;return this};D.error=function(H){var E=null;var F=this;while(F&&!E){E=F.errorHandler;if(!E){F=F.parent}}this.queue=[];this.response=null;if(this.parent){this.parent.queue=[];this.parent.waiting=false}if(E){var G=E.call(this,H);if(G!==false){this.next()}}};D.chain=function(){return Chain(this).then(function(){})};if(!D.clone){D.clone=function(){var E={};Gitana.copyInto(E,this);Chain(E);return E}}return D};Chain.proxy=function(D){if(D.original){D=Chain.unproxy(D)}function C(){}C.prototype=D;var B=new C();B.original=D;B.proxy=true;return B};Chain.unproxy=function(B){var C=null;if(B.original){C=B.original}return C}})(window);(function(B){var A=B.Gitana;A.Chainable=Base.extend({constructor:function(D){var C=this;this.base();this.getDriver=function(){return D};this.getFactory=function(){return new A.ObjectFactory()};this.httpError=function(E){var F=new A.Error();F.name="Http Error";F.message=E.message;F.status=E.status;F.statusText=E.statusText;if(E.stacktrace){F.stacktrace=E.stacktrace}this.error(F);return false};this.missingNodeError=function(F){var E=new A.Error();E.name="Missing Node error";E.message="The node: "+F+" could not be found";this.error(E);return false};this.link=function(E){return this.subchain(E)};this.chainGet=function(E,G,H){var F=this;return this.link(E).then(function(){var I=this;if(A.isFunction(G)){G=G.call(F)}D.gitanaGet(G,H,function(J){I.handleResponse(J);I.next()},function(J){F.httpError(J)});return false})};this.chainCreate=function(E,G,H,I){var F=this;return this.link(E).then(function(){var J=this;if(A.isFunction(H)){H=H.call(F)}D.gitanaPost(H,I,G,function(K){D.gitanaGet(H+"/"+K.getId(),null,function(L){J.handleResponse(L);J.next()},function(L){F.httpError(L)})},function(K){F.httpError(K)});return false})};this.chainCreateEx=function(F,H,G,E){return this.link(F).then(function(){var I=this;D.gitanaPost(G,null,H,function(J){D.gitanaGet(E,null,function(K){I.handleResponse(K);I.next()},function(K){C.httpError(K)})},function(J){C.httpError(J)});return false})};this.chainPost=function(E,G,I,H){var F=this;return this.link(E).then(function(){var J=this;if(A.isFunction(G)){G=G.call(F)}D.gitanaPost(G,I,H,function(K){J.handleResponse(K);J.next()},function(K){F.httpError(K)});return false})};this.chainPostEmpty=function(E,G,I,H,J){var F=this;if(!H){H={}}return this.link(E).then(function(){var K=this;if(A.isFunction(G)){G=G.call(F)}D.gitanaPost(G,I,H,function(L){K.next()},function(L){F.httpError(L)});return false})};this.chainUpload=function(E,G,I,J,H){var F=this;if(!H){H={}}return this.link(E).then(function(){var K=this;if(A.isFunction(G)){G=G.call(F)}D.gitanaUpload(G,I,J,H,function(L){K.next()},function(L){F.httpError(L)});return false})};this.chainGetResponse=function(E,G,H){var F=this;return this.link(E).then(function(){var I=this;if(A.isFunction(G)){G=G.call(F)}D.gitanaGet(G,H,function(J){I.next(J)},function(J){F.httpError(J)});return false})};this.chainGetResponseRows=function(E,F,G){return this.chainGetResponse(E,F,G).then(function(){return this.response.rows})};this.chainHasResponseRow=function(E,F,G){return this.chainGetResponse(E,F).then(function(){var H=false;for(var I=0;I<this.response.rows.length;I++){if(this.response.rows[I].toLowerCase()==G.toLowerCase()){H=true}}return H})};this.chainPostResponse=function(E,G,I,H){var F=this;return this.link(E).then(function(){var J=this;if(A.isFunction(G)){G=G.call(F)}D.gitanaPost(G,I,H,function(K){J.next(K)},function(K){F.httpError(K)});return false})};this.extractPrincipalDomainQualifiedId=function(G,F){var E=this.extractPrincipalIdentifiers(G,F);return E.domain+"/"+E.principal},this.extractPrincipalIdentifiers=function(H,G){var F={};if(!G){G="default"}if(A.isString(H)){var E=H.indexOf("/");if(E>-1){F.domain=H.substring(0,E);F.principal=H.substring(E+1)}else{F.domain=G;F.principal=H}}else{if(H.objectType&&H.objectType=="Gitana.DomainPrincipal"){F.domain=H.getDomainId();F.principal=H.getId()}else{if(H._doc){F.domain=G;F.principal=H._doc}else{if(H.name){F.domain=G;F.principal=H.name}}}}return F}}})})(window);(function(B){var A=B.Gitana;A.Response=Base.extend({constructor:function(C){A.copyInto(this,C)},getId:function(){return this["_doc"]},isStatusDocument:function(){return(this["ok"]||this["error"])},isListDocument:function(){return this["total_rows"]&&this["rows"]&&this["offset"]},isDataDocument:function(){return(!this.isStatusDocument()&&!this.isListDocument())},isOk:function(){var C=true;if(this.isStatusDocument()){if(this["ok"]!=null){C=this["ok"]}}if(this["error"]){C=false}return C},isError:function(){return !this.isOk()}})})(window);(function(B){var A=B.Gitana;A.AuthInfo=Base.extend({constructor:function(C){A.copyInto(this,C)},getPrincipalId:function(){return this["principalId"]},getPrincipalDomainId:function(){return this["principalDomainId"]},getPrincipalName:function(){return this["principalName"]},getTenantId:function(){return this["tenantId"]},getTenantTitle:function(){return this["tenantTitle"]},getTenantDescription:function(){return this["tenantDescription"]},getClientId:function(){return this["clientId"]}})})(window);(function(B){var A=B.Gitana;A.SystemMetadata=Base.extend({constructor:function(){this.base();this._system={}},updateFrom:function(D){for(var C in this._system){if(this._system.hasOwnProperty(C)){delete this._system[C]}}A.copyInto(this._system,D)},get:function(C){return this._system[C]},getChangesetId:function(){return this.get("changeset")},getCreatedBy:function(){return this.get("created_by")},getCreatedByPrincipalId:function(){return this.get("created_by_principal_id")},getCreatedByPrincipalDomainId:function(){return this.get("created_by_principal_domain_id")},getModifiedBy:function(){return this.get("modified_by")},getModifiedByPrincipalId:function(){return this.get("modified_by_principal_id")},getModifiedByPrincipalDomainId:function(){return this.get("modified_by_principal_domain_id")},getCreatedOn:function(){if(!this.createdOn){this.createdOn=new A.Timestamp(this.get("created_on"))}return this.createdOn},getModifiedOn:function(){if(!this.modifiedOn){this.modifiedOn=new A.Timestamp(this.get("modified_on"))}return this.modifiedOn}})})(window);(function(B){var A=B.Gitana;A.Timestamp=Base.extend({constructor:function(C){this.base(C)},getYear:function(){return this["year"]},getMonth:function(){return this["month"]},getDay:function(){return this["day_of_month"]},getHour:function(){return this["hour"]},getMinute:function(){return this["minute"]},getSecond:function(){return this["second"]},getMillisecond:function(){return this["millisecond"]},getTime:function(){return this["ms"]},getTimestamp:function(){return this["timestamp"]}})})(window);(function(A){Gitana.uniqueIdCounter=0;Gitana.makeArray=function(B){return Array.prototype.slice.call(B)};Gitana.stringify=function(B,C){var D=null;if(B){if(C){D=JSON.stringify(B,null,"  ")}else{D=JSON.stringify(B)}}return D};Gitana.isString=function(B){return(typeof B=="string")};Gitana.isNumber=function(B){return(typeof B=="number")};Gitana.isBoolean=function(B){return(typeof B=="boolean")};Gitana.isFunction=function(B){return Object.prototype.toString.call(B)==="[object Function]"};Gitana.startsWith=function(C,B){return C.substr(0,B.length)===B};Gitana.copyInto=function(D,C){for(var B in C){if(C.hasOwnProperty(B)&&!this.isFunction(C[B])){D[B]=C[B]}}};Gitana.stampInto=function(D,C){for(var B in C){if(C.hasOwnProperty(B)){D[B]=C[B]}}};Gitana.contains=function(B,D){var C=B.length;while(C--){if(B[C]===D){return true}}return false};Gitana.isArray=function(B){return B.push&&B.slice};Gitana.isUndefined=function(B){return(typeof B=="undefined")};Gitana.isEmpty=function(B){return this.isUndefined(B)||B==null};Gitana.generateId=function(){Gitana.uniqueIdCounter++;return"gitana-"+Gitana.uniqueIdCounter};Gitana.isNode=function(B){return(typeof Node==="object"?B instanceof Node:typeof B==="object"&&typeof B.nodeType==="number"&&typeof B.nodeName==="string")};Gitana.isElement=function(B){return(typeof HTMLElement==="object"?B instanceof HTMLElement:typeof B==="object"&&B.nodeType===1&&typeof B.nodeName==="string")};Gitana.debug=function(B){if(!this.isUndefined(console)){console.log(B)}};Gitana.error=function(B){if(!this.isUndefined(console)){console.error(B)}};Gitana.getNumberOfKeys=function(D){var C=0;for(var B in D){C++}return C};Gitana.writeCookie=function(C,E,F,G,D){if(typeof (document)!=="undefined"){function B(H,L,P,M,N){if(!P){P="/"}var J="; path="+P;var O="";if(M){var I=new Date();I.setTime(I.getTime()+(M*24*60*60*1000));O="; expires="+I.toGMTString()}var K="";if(N){K="; domain="+N}document.cookie=H+"="+L+O+J+K}B(C,E,F,G,D)}};Gitana.deleteCookie=function(B,C){if(typeof (document)!=="undefined"){Gitana.writeCookie(B,"",C,-1);Gitana.writeCookie(B,"",C,-1,A.location.host)}};Gitana.readCookie=function(B){function C(F){var H=F+"=";var E=document.cookie.split(";");for(var G=0;G<E.length;G++){var I=E[G];while(I.charAt(0)==" "){I=I.substring(1,I.length)}if(I.indexOf(H)==0){return I.substring(H.length,I.length)}}return null}var D=null;if(typeof (document)!=="undefined"){D=C(B)}return D};Gitana.getCurrentQueryStringParameter=function(D){var B=A.location.search.substring(1),C,F,E=B.split("&");for(C=0;C<E.length;C++){F=E[C].split("=");if(F[0]==D){return unescape(F[1])}}return null};Gitana.getCurrentHashStringParameter=function(C){var B=A.location.href.substring(A.location.href.indexOf("#")+1);var D=B.split("&");for(i=0;i<D.length;i++){val=D[i].split("=");if(val[0]==C){return unescape(val[1])}}return null};Gitana.btoa=function(E){var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var F=0,H=E.length,B,D,C="";for(;F<H;F+=3){B=[E.charCodeAt(F),E.charCodeAt(F+1),E.charCodeAt(F+2)];D=[B[0]>>2,((B[0]&3)<<4)|B[1]>>4,((B[1]&15)<<2)|B[2]>>6,B[2]&63];if(isNaN(B[1])){D[2]=64}if(isNaN(B[2])){D[3]=64}C+=G.charAt(D[0])+G.charAt(D[1])+G.charAt(D[2])+G.charAt(D[3])}return C}})(window);(function(A){(function(){if(typeof A.location!="undefined"){var B=A.location.href;var C=B.indexOf(A.location.pathname);C=B.indexOf("/",C+2);if(C>-1){B=B.substring(0,C)}if(B.indexOf("cloudcms.net")>-1){Gitana.autoConfigUri=B}}}())})(window);(function(B){var A=B.Gitana;A.ObjectFactory=Base.extend({constructor:function(){this.create=function(C,E,D){var F=new C(E,D);return F}},platformDataStoreMap:function(C,D){return this.create(A.PlatformDataStoreMap,C,D)},platformDataStore:function(C,D){var E=D.datastoreTypeId;return this[E](C,D)},platform:function(C,D){return this.create(A.Platform,C,D)},job:function(C,D){var E=null;if(D){if(A.isString(D)){E=D}else{E=D.type}}var F=null;if("copy"==E){F=this.create(A.CopyJob,C,D)}else{if("export"==E){F=this.create(A.TransferExportJob,C,D)}else{if("import"==E){F=this.create(A.TransferImportJob,C,D)}else{F=this.create(A.Job,C,D)}}}return F},jobMap:function(C,D){return this.create(A.JobMap,C,D)},logEntry:function(C,D){return this.create(A.LogEntry,C,D)},logEntryMap:function(C,D){return this.create(A.LogEntryMap,C,D)},auditRecord:function(D,C){return this.create(A.AuditRecord,D,C)},auditRecordMap:function(D,C){return this.create(A.AuditRecordMap,D,C)},stack:function(C,D){return this.create(A.Stack,C,D)},stackMap:function(C,D){return this.create(A.StackMap,C,D)},repository:function(C,D){return this.create(A.Repository,C,D)},repositoryMap:function(C,D){return this.create(A.RepositoryMap,C,D)},domain:function(C,D){return this.create(A.Domain,C,D)},domainMap:function(C,D){return this.create(A.DomainMap,C,D)},vault:function(C,D){return this.create(A.Vault,C,D)},vaultMap:function(C,D){return this.create(A.VaultMap,C,D)},registrar:function(C,D){return this.create(A.Registrar,C,D)},registrarMap:function(C,D){return this.create(A.RegistrarMap,C,D)},directory:function(C,D){return this.create(A.Directory,C,D)},directoryMap:function(C,D){return this.create(A.DirectoryMap,C,D)},application:function(C,D){return this.create(A.Application,C,D)},applicationMap:function(C,D){return this.create(A.ApplicationMap,C,D)},warehouse:function(C,D){return this.create(A.Warehouse,C,D)},warehouseMap:function(C,D){return this.create(A.WarehouseMap,C,D)},webHost:function(C,D){return this.create(A.WebHost,C,D)},webHostMap:function(C,D){return this.create(A.WebHostMap,C,D)},autoClientMapping:function(D,C){return this.create(A.AutoClientMapping,D,C)},autoClientMappingMap:function(D,C){return this.create(A.AutoClientMappingMap,D,C)},settings:function(D,C){return this.create(A.Settings,D,C)},settingsMap:function(D,C){return this.create(A.SettingsMap,D,C)},registration:function(D,C){return this.create(A.Registration,D,C)},registrationMap:function(D,C){return this.create(A.RegistrationMap,D,C)},email:function(D,C){return this.create(A.Email,D,C)},emailMap:function(D,C){return this.create(A.EmailMap,D,C)},emailProvider:function(D,C){return this.create(A.EmailProvider,D,C)},emailProviderMap:function(D,C){return this.create(A.EmailProviderMap,D,C)},interactionApplication:function(C,D){return this.create(A.InteractionApplication,C,D)},interactionApplicationMap:function(C,D){return this.create(A.InteractionApplicationMap,C,D)},interactionSession:function(C,D){return this.create(A.InteractionSession,C,D)},interactionSessionMap:function(C,D){return this.create(A.InteractionSessionMap,C,D)},interactionPage:function(C,D){return this.create(A.InteractionPage,C,D)},interactionPageMap:function(C,D){return this.create(A.InteractionPageMap,C,D)},interactionNode:function(C,D){return this.create(A.InteractionNode,C,D)},interactionNodeMap:function(C,D){return this.create(A.InteractionNodeMap,C,D)},interactionUser:function(C,D){return this.create(A.InteractionUser,C,D)},interactionUserMap:function(C,D){return this.create(A.InteractionUserMap,C,D)},interactionReport:function(C,D){return this.create(A.InteractionReport,C,D)},interactionReportMap:function(C,D){return this.create(A.InteractionReportMap,C,D)},interactionReportEntry:function(C,D){return this.create(A.InteractionReportEntry,C,D)},interactionReportEntryMap:function(C,D){return this.create(A.InteractionReportEntryMap,C,D)},interaction:function(C,D){return this.create(A.Interaction,C,D)},interactionMap:function(C,D){return this.create(A.InteractionMap,C,D)},client:function(C,E){var D=this.create(A.Client,C,E);A.stampInto(D,A.ClientMethods);return D},clientMap:function(C,D){return this.create(A.ClientMap,C,D)},authenticationGrant:function(C,D){return this.create(A.AuthenticationGrant,C,D)},authenticationGrantMap:function(C,D){return this.create(A.AuthenticationGrantMap,C,D)},billingProviderConfiguration:function(C,D){return this.create(A.BillingProviderConfiguration,C,D)},billingProviderConfigurationMap:function(C,D){return this.create(A.BillingProviderConfigurationMap,C,D)},changeset:function(D,C){return this.create(A.Changeset,D,C)},branch:function(D,C){return this.create(A.Branch,D,C)},node:function(F,D){var C=null;if(D){if(A.isString(D)){D={_type:D}}var E=D._type;if(E){if(A.ObjectFactory.registry[E]){C=A.ObjectFactory.registry[E]}}if(!C){if(E&&A.startsWith(E,"a:")){C=A.Association}}if(!C){if(D._is_association){C=A.Association}}}if(!C){C=A.Node}return this.create(C,F,D)},association:function(D,C){return this.create(A.Association,D,C)},branchMap:function(D,C){return this.create(A.BranchMap,D,C)},changesetMap:function(D,C){return this.create(A.ChangesetMap,D,C)},nodeMap:function(D,C){return this.create(A.NodeMap,D,C)},definition:function(D,C){return this.create(A.Definition,D,C)},form:function(D,C){return this.create(A.Form,D,C)},traversalResults:function(D,C){return this.create(A.TraversalResults,D,C)},domainPrincipal:function(D,C){var E=null;E=this.create(A.DomainPrincipal,D,C);if(C){this.extendPrincipal(E)}return E},domainPrincipalMap:function(C,D){return this.create(A.PrincipalMap,C,D)},extendPrincipal:function(C){if(!C.TYPE&&C.objectType=="Gitana.DomainPrincipal"){if(C.getType()=="USER"){A.stampInto(C,A.DomainUser)}else{if(C.getType()=="GROUP"){A.stampInto(C,A.DomainGroup)}}}},archive:function(D,C){return this.create(A.Archive,D,C)},archiveMap:function(D,C){return this.create(A.ArchiveMap,D,C)},team:function(D,E,C,F){return new A.Team(D,E,C,F)},teamMap:function(C,D,E){return new A.TeamMap(C,D,E)},activity:function(D,C){return new A.Activity(D,C)},activityMap:function(D,C){return new A.ActivityMap(D,C)},tenant:function(D,C){return this.create(A.Tenant,D,C)},tenantMap:function(D,C){return this.create(A.TenantMap,D,C)},plan:function(D,C){return this.create(A.Plan,D,C)},planMap:function(D,C){return this.create(A.PlanMap,D,C)},identity:function(C,D){return this.create(A.Identity,C,D)},identityMap:function(C,D){return this.create(A.IdentityMap,C,D)}});A.ObjectFactory.registry={};A.ObjectFactory.register=function(D,C){A.ObjectFactory.registry[D]=C}})(window);(function(B){var A=B.Gitana;A.AbstractPersistable=A.Chainable.extend({constructor:function(D,C){this.base(D);if(!this.object){this.object={}}if(C){this.handleResponse.call(this,C)}},handleResponse:function(C){for(var D in this.object){if(this.object.hasOwnProperty(D)&&!A.isFunction(this.object[D])){delete this.object[D]}}delete C._ref;A.copyInto(this.object,C);this.handleSystemProperties()},handleSystemProperties:function(){}})})(window);(function(B){var A=B.Gitana;A.AbstractMap=A.AbstractPersistable.extend({constructor:function(D,C){if(!this.map){this.map={}}if(!this.keys){this.keys=[]}this.base(D,C)},clear:function(){for(var C in this.map){if(this.map.hasOwnProperty(C)){delete this.map[C]}}while(this.keys.length>0){this.keys.shift()}},handleResponse:function(C){this.base(C);this.clear();if(C){if(A.isArray(C.rows)){for(var E=0;E<C.rows.length;E++){var G=this.buildObject(C.rows[E]);this.map[G.getId()]=G;this.keys.push(G.getId())}}else{for(var D in C.rows){var F=C.rows[D];var G=this.buildObject(F);this.map[G.getId()]=G;this.keys.push(G.getId())}}}},buildObject:function(C){},get:function(C){return this.map[C]},each:function(C){return this.then(function(){for(var E=0;E<this.keys.length;E++){var D=this.keys[E];var G=this.map[D];var F=function(J,I,H){return function(){J.call(this,I,this,H)}}(C,D,E);this.subchain(G).then(F)}return this})},eachX:function(C){return this.then(function(){var H=[];for(var E=0;E<this.keys.length;E++){var D=this.keys[E];var G=this.map[D];var F=function(L,J,K,I){return function(){this.subchain(K).then(function(){L.call(this,J,this,I)})}}(C,D,G,E);H.push(F)}return this.then(H)})},filter:function(C){return this.then(function(){var E=[];var D=[];for(var H=0;H<this.keys.length;H++){var G=this.keys[H];var F=this.map[G];var I=C.call(F);if(I){E.push(G)}else{D.push(G)}}for(var H=0;H<D.length;H++){delete this.map[D[H]]}while(this.keys.length>0){this.keys.shift()}for(var H=0;H<E.length;H++){this.keys.push(E[H])}})},sort:function(C){return this.then(function(){this.keys.sort(C)})},limit:function(C){return this.then(function(){var D=[];if(C>this.keys.length){return }for(var E=0;E<this.keys.length;E++){if(E>=C){D.push(this.keys[E])}}while(this.keys.length>C){this.keys.pop()}for(var E=0;E<D.length;E++){delete this.map[D[E]]}})},count:function(C){return this.then(function(){C.call(this,this.keys.length)})},totalRows:function(C){return this.then(function(){C.call(this,this.object.total_rows)})},keepOne:function(){var E=this;var D=this.buildObject({});var C=this.subchain(D);C.subchain(E).then(function(){if(this.keys.length>0){var G=this.map[this.keys[0]];if(C.loadFrom){C.loadFrom(G)}else{C.handleResponse(G.object)}}else{var F=new A.Error();F.name="Empty Map";F.message="The map doesn't have any elements in it";this.error(F)}});return C},select:function(E){var D=this;var C=this.subchain(this.buildObject({}));C.subchain(D).then(function(){var G=this.map[E];if(!G){var F=new A.Error();F.name="No element with key: "+E;F.message=F.name;this.error(F);return false}if(C.loadFrom){C.loadFrom(G)}else{C.handleResponse(G.object)}});return C}})})(window);(function(B){var A=B.Gitana;A.AbstractObject=A.AbstractPersistable.extend({constructor:function(D,C){if(!this.system){this.system=new A.SystemMetadata()}this.chainDelete=function(E,G,H){var F=this;return this.link(E).then(function(){var I=this;if(A.isFunction(G)){G=G.call(F)}I.getDriver().gitanaDelete(G,H,function(){I.next()},function(J){F.httpError(J)});return false})};this.chainReload=function(E,G,H){var F=this;return this.link(E).then(function(){var I=this;if(A.isFunction(G)){G=G.call(F)}I.getDriver().gitanaGet(G,H,function(J){I.handleResponse(J);I.next()},function(J){F.httpError(J)});return false})};this.chainUpdate=function(E,G,H){var F=this;return this.link(E).then(function(){var I=this;if(A.isFunction(G)){G=G.call(F)}I.getDriver().gitanaPut(G,H,I.object,function(){I.getDriver().gitanaGet(G,H,function(J){I.handleResponse(J);I.next()},function(J){F.httpError(J)})},function(J){F.httpError(J)});return false})};this.base(D,C)},getUri:function(){return null},getType:function(){return null},getProxiedUri:function(){return this.getDriver().baseURL+this.getUri()},get:function(C){return this.object[C]},set:function(C,D){this.object[C]=D},getId:function(){return this.get("_doc")},getSystemMetadata:function(){return this.system},getTitle:function(){return this.get("title")},getDescription:function(){return this.get("description")},replacePropertiesWith:function(C){var E={};A.copyInto(E,C);var F={};F._doc=this.object._doc;delete E._doc;F._type=this.object._type;delete E._type;F._qname=this.object._qname;delete E._qname;for(var D in this.object){if(this.object.hasOwnProperty(D)&&!A.isFunction(this.object[D])){delete this.object[D]}}this.object._doc=F._doc;this.object._type=F._type;this.object._qname=F._qname;A.copyInto(this.object,E)},handleSystemProperties:function(){if(this.object){if(this.object._system){var C={};A.copyInto(C,this.object._system);delete this.object._system;this.system.updateFrom(C)}}},stringify:function(C){return A.stringify(this.object,C)},loadFrom:function(C){this.handleResponse(C.object);this.system.updateFrom(C.system._system)}})})(window);(function(B){var A=B.Gitana;A.AbstractSelfableObject=A.AbstractObject.extend({constructor:function(D,C){this.base(D,C)},del:function(){var C=this;var D=function(){return C.getUri()};return this.chainDelete(this.getPlatform(),D)},reload:function(){var C=this;var D=function(){return C.getUri()};return this.chainReload(this.clone(),D)},update:function(){var C=this;var D=function(){return C.getUri()};return this.chainUpdate(this.clone(),D)}})})(window);(function(B){var A=B.Gitana;A.AbstractSelfableACLObject=A.AbstractSelfableObject.extend({constructor:function(D,C){this.base(D,C)},loadACL:function(E){var C=this;var D=function(){return C.getUri()+"/acl/list"};return this.chainGetResponse(this,D).then(function(){E.call(this,this.response)})},listAuthorities:function(F,G){var E=this.extractPrincipalDomainQualifiedId(F);var C=this;var D=function(){return C.getUri()+"/acl?id="+E};return this.chainGetResponseRows(this,D).then(function(){G.call(this,this.response)})},checkAuthority:function(G,E,H){var F=this.extractPrincipalDomainQualifiedId(G);var C=this;var D=function(){return C.getUri()+"/authorities/"+E+"/check?id="+F};return this.chainPostResponse(this,D).then(function(){H.call(this,this.response.check)})},grantAuthority:function(G,E){var F=this.extractPrincipalDomainQualifiedId(G);var C=this;var D=function(){return C.getUri()+"/authorities/"+E+"/grant?id="+F};return this.chainPostEmpty(this,D)},revokeAuthority:function(G,E){var F=this.extractPrincipalDomainQualifiedId(G);var C=this;var D=function(){return C.getUri()+"/authorities/"+E+"/revoke?id="+F};return this.chainPostEmpty(this,D)},revokeAllAuthorities:function(C){return this.revokeAuthority(C,"all")},loadAuthorityGrants:function(D,E){if(!D){D=[]}var C={principals:D};return this.chainPostResponse(this,this.getUri()+"/authorities",{},C).then(function(){E.call(this,this.response)})},checkPermission:function(F,C,G){var E=this.extractPrincipalDomainQualifiedId(F);var D=function(){return self.getUri()+"/permissions/"+C+"/check?id="+E};return this.chainPostResponse(this,D).then(function(){G.call(this,this.response.check)})}})})(window);(function(B){var A=B.Gitana;A.DataStore=A.AbstractObject.extend({constructor:function(D,C){this.base(D,C)},getUri:function(){return null},getType:function(){return null},loadACL:function(D){var C=function(){return this.getUri()+"/acl/list"};return this.chainGetResponse(this,C).then(function(){D.call(this,this.response)})},listAuthorities:function(E,F){var D=this.extractPrincipalDomainQualifiedId(E);var C=function(){return this.getUri()+"/acl?id="+D};return this.chainGetResponseRows(this,C).then(function(){F.call(this,this.response)})},checkAuthority:function(F,D,G){var E=this.extractPrincipalDomainQualifiedId(F);var C=function(){return this.getUri()+"/authorities/"+D+"/check?id="+E};return this.chainPostResponse(this,C).then(function(){G.call(this,this.response.check)})},grantAuthority:function(F,D){var E=this.extractPrincipalDomainQualifiedId(F);var C=function(){return this.getUri()+"/authorities/"+D+"/grant?id="+E};return this.chainPostEmpty(this,C)},revokeAuthority:function(F,D){var E=this.extractPrincipalDomainQualifiedId(F);var C=function(){return this.getUri()+"/authorities/"+D+"/revoke?id="+E};return this.chainPostEmpty(this,C)},revokeAllAuthorities:function(C){return this.revokeAuthority(C,"all")},loadAuthorityGrants:function(D,E){if(!D){D=[]}var C={principals:D};return this.chainPostResponse(this,this.getUri()+"/authorities",{},C).then(function(){E.call(this,this.response)})},checkPermission:function(F,C,G){var E=this.extractPrincipalDomainQualifiedId(F);var D=function(){return this.getUri()+"/permissions/"+C+"/check?id="+E};return this.chainPostResponse(this,D).then(function(){G.call(this,this.response.check)})},readTeam:function(C){var E=function(){return this.getUri()+"/teams/"+C};var D=this.getFactory().team(this.getPlatform(),this,C);return this.chainGet(D,E)},listTeams:function(){var D=function(){return this.getUri()+"/teams"};var C=this.getFactory().teamMap(this.getCluster(),this);return this.chainGet(C,D)},createTeam:function(C,F){if(!F){F={}}var G=function(){return this.getUri()+"/teams?key="+C};var E=this;var D=this.getFactory().team(this.getPlatform(),this,C);return this.chainPostResponse(D,G,{},F).then(function(){this.subchain(E).readTeam(C).then(function(){A.copyInto(D.object,this.object)})})},readOwnersTeam:function(){return this.readTeam("owners")},listActivities:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().activityMap(this);return this.chainGet(C,"/activities",E)},readActivity:function(D){var C=this.getFactory().activity(this);return this.chainGet(C,"/activities/"+D)},queryActivities:function(E,D){var C=this.getFactory().activityMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/activities/query",F,E)},getMaxSize:function(){return this.get("maxSize")},getSize:function(){return this.get("size")},getObjectCount:function(){return this.get("objectcount")}})})(window);(function(B){var A=B.Gitana;A.ContainedDataStore=A.DataStore.extend({constructor:function(C,D){this.base(C.getDriver(),D);this.getContainer=function(){return C};this.getContainerId=function(){return C.getId()}},del:function(){var C=function(){return this.getUri()};return this.chainDelete(this.getContainer(),C)},reload:function(){var C=function(){return this.getUri()};return this.chainReload(this.clone(),C)},update:function(){var C=function(){return this.getUri()};return this.chainUpdate(this.clone(),C)},exportArchive:function(F){var J=this;var K=F.vault;if(!A.isString(K)){K=K.getId()}var G=F.group;var I=F.artifact;var D=F.version;var E=(F.configuration?F.configuration:{});var C=(F.async?false:true);var H=this.getFactory().job(this.getCluster(),"export");return this.link(H).then(function(){var L=this;this.getDriver().gitanaPost(J.getUri()+"/export?vault="+K+"&group="+G+"&artifact="+I+"&version="+D+"&schedule=ASYNCHRONOUS",{},E,function(M){A.handleJobCompletion(L,J.getCluster(),M.getId(),C)},function(M){J.httpError(M)});return false})},importArchive:function(F){var J=this;var K=F.vault;if(!A.isString(K)){K=K.getId()}var G=F.group;var I=F.artifact;var D=F.version;var E=(F.configuration?F.configuration:{});var C=(F.async?false:true);var H=this.getFactory().job(this.getCluster(),"import");return this.link(H).then(function(){var L=this;this.getDriver().gitanaPost(J.getUri()+"/import?vault="+K+"&group="+G+"&artifact="+I+"&version="+D+"&schedule=ASYNCHRONOUS",{},E,function(M){A.handleJobCompletion(L,J.getCluster(),M.getId(),C)},function(M){J.httpError(M)});return false})}})})(window);(function(B){var A=B.Gitana;A.BinaryAttachment=A.Chainable.extend({constructor:function(D,C,E){this.base(D.getDriver());this.objectType="Gitana.BinaryAttachment";this.persistable=D;this.attachmentId=C;this.attachment={};this.handleAttachment(E)},handleAttachment:function(D){for(var C in this.attachment){if(this.attachment.hasOwnProperty(C)){delete this.attachment[C]}}if(D){A.copyInto(this.attachment,D)}},getId:function(){return this.attachmentId},getLength:function(){return this.attachment.length},getContentType:function(){return this.attachment.contentType},getFilename:function(){return this.attachment.filename},getUri:function(){return this.persistable.getUri()+"/attachments/"+this.getId()},getDownloadUri:function(){return this.getDriver().baseURL+this.getUri()},del:function(){var D=this;var C=this.subchain(this.persistable);C.subchain(D).then(function(){var E=this;this.getDriver().gitanaDelete(this.getUri(),null,function(){E.next()},function(F){D.httpError(F)});return false});return C},download:function(D){var C=this;return this.then(function(){var E=this;this.getDriver().gitanaDownload(this.getUri(),null,function(F){D.call(C,F);E.next()},function(F){C.httpError(F)});return false})}})})(window);(function(B){var A=B.Gitana;A.BinaryAttachmentMap=A.AbstractPersistable.extend({constructor:function(C,D){this.base(C.getPlatform());this.objectType="Gitana.BinaryAttachmentMap";this.persistable=C;this.map={};this.handleMap(D);this.getAttachments=function(){var E={};for(var F in this.map){E[F]=this.produce(F,this.map[F])}return E},this.produce=function(E,F){return new A.BinaryAttachment(this.persistable,E,F)}},handleMap:function(E){for(var C in this.map){if(this.map.hasOwnProperty(C)){delete this.map[C]}}if(E){A.copyInto(this.map,E);this.keys=[];var D=0;for(var C in this.map){this.keys.push(C);D++}this.object.total_rows=D}},get:function(C){return this.map[C]},count:function(C){return this.then(function(){var D=A.getNumberOfKeys(this.getAttachments());C.call(this,D)})},each:function(C){return this.then(function(){var F=0;var D=this.getAttachments();for(var E=0;E<this.keys.length;E++){var H=this.keys[E];var I=D[H];var G=function(L,K,J){return function(){L.call(this,K,this,J)}}(C,H,F);this.subchain(I).then(G);F++}return this})},select:function(E){var D=this;if(!E){E="default"}var C=this.subchain(this.produce(E));C.subchain().then(function(){var F=D.getAttachments()[E];if(!F){var G=new A.Error();G.name="No attachment with id: "+E;G.message=G.name;this.error(G);return false}C.handleAttachment(F.attachment)});return C},filter:function(C){return this.then(function(){var E=[];var D=[];for(var H=0;H<this.keys.length;H++){var G=this.keys[H];var F=this.map[G];var I=C.call(F);if(I){E.push(G)}else{D.push(G)}}for(var H=0;H<D.length;H++){delete this.map[D[H]]}while(this.keys.length>0){this.keys.shift()}for(var H=0;H<E.length;H++){this.keys.push(E[H])}})},paginate:function(C){return this.then(function(){var G=C.skip;var E=C.limit;var D=[];for(var F=0;F<this.keys.length;F++){if(F<G||F>=G+E){D.push(this.keys[F])}}while(this.keys.length>E+G){this.keys.pop()}for(var F=0;F<G;F++){this.keys.shift()}for(var F=0;F<D.length;F++){delete this.map[D[F]]}})},sort:function(C){return this.then(function(){this.keys.sort(C)})}})})(window);(function(B){var A=B.Gitana;A.AuditRecord=A.AbstractObject.extend({constructor:function(D,C){this.base(D.getCluster(),C);this.objectType="Gitana.AuditRecord";this.getDataStore=function(){return D};this.getDataStoreId=function(){return D.getId()}},getUri:function(){return this.datastore.getUri()+"/audit"},clone:function(){return this.getFactory().auditRecord(this.getDataStore(),this.object)},getScope:function(){return this.get("scope")},getAction:function(){return this.get("action")},getPrincipalId:function(){return this.get("principal")},getMethod:function(){return this.get("method")},getHandler:function(){return this.get("handler")},getArgs:function(){return this.get("args")},getReturn:function(){return this.get("return")}})})(window);(function(B){var A=B.Gitana;A.AuditRecordMap=A.AbstractMap.extend({constructor:function(D,C){this.objectType="Gitana.AuditRecordMap";this.datastore=D;this.base(D.getDriver(),C)},clone:function(){return this.getFactory().auditRecordMap(this.datastore,this.object)},buildObject:function(C){return this.getFactory().auditRecord(this.datastore,C)}})})(window);(function(B){var A=B.Gitana;A.Team=A.AbstractObject.extend({constructor:function(D,E,C,F){this.base(D.getDriver(),F);this.objectType="Gitana.Team";this.teamable=E;this.teamKey=C;this.getCluster=function(){return D}},getUri:function(){return this.teamable.getUri()+"/teams/"+this.teamKey},del:function(){var C=function(){return this.getUri()};return this.chainDelete(this.teamable,C)},reload:function(){var C=function(){return this.getUri()};return this.chainReload(this.clone(),C)},update:function(){var C=function(){return this.getUri()};return this.chainUpdate(this.clone(),C)},addMember:function(E){var D=this.extractPrincipalDomainQualifiedId(E);var C=function(){return this.getUri()+"/members/add?id="+D};return this.chainPostEmpty(this,C)},removeMember:function(E){var D=this.extractPrincipalDomainQualifiedId(E);var C=function(){return this.getUri()+"/members/remove?id="+D};return this.chainPostEmpty(this,C)},listMembers:function(D){var F={};if(D){A.copyInto(F,D)}var E=function(){return this.getUri()+"/members"};var C=this.getFactory().domainPrincipalMap(this.getCluster());return this.chainGet(C,E,F)},grant:function(D){var C=function(){return this.getUri()+"/authorities/"+D+"/grant"};return this.chainPostEmpty(this,C)},revoke:function(D){var C=function(){return this.getUri()+"/authorities/"+D+"/revoke"};return this.chainPostEmpty(this,C)},loadAuthorities:function(D){var C=function(){return this.getUri()+"/authorities"};return this.chainGetResponse(this,C).then(function(){D.call(this,this.response.authorities)})},getKey:function(){return this.teamKey},getGroupId:function(){return this.get("groupId")},getRoleKeys:function(){return this.get("roleKeys")}})})(window);(function(B){var A=B.Gitana;A.TeamMap=A.AbstractMap.extend({constructor:function(C,D,E){this.objectType="Gitana.TeamMap";this.getCluster=function(){return C};this.base(C.getDriver(),E);this.teamable=D},clone:function(){return this.getFactory().teamMap(this.getCluster(),this.teamable,this.object)},buildObject:function(D){var C=D._doc;return this.getFactory().team(this.getCluster(),this.teamable,C,D)}})})(window);(function(B){var A=B.Gitana;A.Activity=A.AbstractObject.extend({constructor:function(D,C){this.base(D.getDriver(),C);this.objectType="Gitana.Activity";this.getDataStore=function(){return D}},getUri:function(){return this.getDataStore().getUri()+"/activities/"+this.getId()},del:function(){var C=function(){return this.getUri()};return this.chainDelete(this.getDataStore(),C)},reload:function(){var C=function(){return this.getUri()};return this.chainReload(this.clone(),C)},update:function(){var C=function(){return this.getUri()};return this.chainUpdate(this.clone(),C)},getType:function(){return this.get("type")},getTimestamp:function(){return this.get("timestamp")},getUserDomainId:function(){return this.get("userDomainId")},getUserId:function(){return this.get("userId")},getUserTitle:function(){return this.get("userTitle")},getUserEmail:function(){return this.get("userEmail")},getUserName:function(){return this.get("userName")},getObjectDataStoreTypeId:function(){return this.get("objectDatastoreTypeId")},getObjectDataStoreId:function(){return this.get("objectDatastoreId")},getObjectDataStoreTitle:function(){return this.get("objectDatastoreTitle")},getObjectTypeId:function(){return this.get("objectTypeId")},getObjectId:function(){return this.get("objectId")},getObjectTitle:function(){return this.get("objectTitle")},getOtherDataStoreTypeId:function(){return this.get("otherDatastoreTypeId")},getOtherDataStoreId:function(){return this.get("otherDatastoreId")},getOtherDataStoreTitle:function(){return this.get("otherDatastoreTitle")},getOtherTypeId:function(){return this.get("otherTypeId")},getOtherId:function(){return this.get("otherId")},getOtherTitle:function(){return this.get("otherTitle")}})})(window);(function(B){var A=B.Gitana;A.ActivityMap=A.AbstractMap.extend({constructor:function(D,C){this.objectType="Gitana.ActivityMap";this.getDataStore=function(){return D};this.base(D.getDriver(),C)},clone:function(){return this.getFactory().activityMap(this.getDataStore(),this.object)},buildObject:function(C){return this.getFactory().activity(this.getDataStore(),C)}})})(window);(function(B){var A=B.Gitana;A.Cluster=A.DataStore.extend({constructor:function(D,C){this.objectType="Gitana.Cluster";this.base(D,C)},getUri:function(){return""},getType:function(){return A.TypedIDConstants.TYPE_CLUSTER},clone:function(){return new A.Cluster(this.getDriver(),this.object)},loadContainedTypes:function(D,E){var C=function(){return"/tools/types/contained/"+D};return this.chainPostResponse(this,C).then(function(){E.call(this,this.response.types)})},queryJobs:function(E,D){var C=this.getFactory().jobMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/jobs/query",F,E)},readJob:function(C){var D=this.getFactory().job(this);return this.chainGet(D,"/jobs/"+C)},killJob:function(C){return this.chainPostEmpty(this,"/jobs/"+C+"/kill")},queryUnstartedJobs:function(E,D){var C=this.getFactory().jobMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/jobs/unstarted/query",F,E)},queryRunningJobs:function(E,D){var C=this.getFactory().jobMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/jobs/running/query",F,E)},queryFailedJobs:function(E,D){var C=this.getFactory().jobMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/jobs/failed/query",F,E)},queryWaitingJobs:function(E,D){var C=this.getFactory().jobMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/jobs/waiting/query",F,E)},queryFinishedJobs:function(E,D){var C=this.getFactory().jobMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/jobs/finished/query",F,E)}})})(window);(function(B){var A=B.Gitana;A.Job=A.AbstractObject.extend({constructor:function(C,D){this.base(C.getDriver(),D);this.objectType="Gitana.Job"},getType:function(){return this.get("type")},getRunAsPrincipalId:function(){return this.get("runAsPrincipal")},getRunAsPrincipalDomainId:function(){return this.get("runAsPrincipalDomain")},getState:function(){return this.get("state")},getPlatformId:function(){return this.get("platformId")},getPriority:function(){return this.get("priority")},getAttempts:function(){return this.get("attempts")},getScheduledStartTime:function(){return this.get("schedule_start_ms")},getLogEntries:function(){return this.get("log_entries")},getCurrentThread:function(){return this.get("current_thread")},getCurrentServer:function(){return this.get("current_server")},getCurrentServerTimeStamp:function(){return this.get("current_server_timestamp")},getSubmittedBy:function(){return this.get("submitted_by")},getSubmittedTimestamp:function(){return this.get("submitted_timestamp")},getStarted:function(){return this.get("started")},getStartedBy:function(){return this.get("started_by")},getStartedTimestamp:function(){return this.get("started_timestamp")},getStopped:function(){return this.get("stopped")},getStoppedTimestamp:function(){return this.get("stopped_timestamp")},getPaused:function(){return this.get("paused")},getPausedBy:function(){return this.get("paused_by")},getPausedTimestamp:function(){return this.get("paused_timestamp")}})})(window);(function(B){var A=B.Gitana;A.JobMap=A.AbstractMap.extend({constructor:function(C,D){this.objectType="Gitana.JobMap";this.getCluster=function(){return C};this.base(C.getDriver(),D)},clone:function(){return this.getFactory().jobMap(this.getCluster(),this.object)},buildObject:function(C){return this.getFactory().job(this.getCluster(),C)}})})(window);(function(B){var A=B.Gitana;A.LogEntry=A.AbstractObject.extend({constructor:function(C,D){this.base(C.getDriver(),D);this.objectType="Gitana.LogEntry"},getType:function(){return A.TypedIDConstants.TYPE_LOG_ENTRY},getPrincipalId:function(){return this.get("principalId")},getRepositoryId:function(){return this.get("repositoryId")},getBranchId:function(){return this.get("branchId")},getLevel:function(){return this.get("level")},getThread:function(){return this.get("thread")},getTimestamp:function(){return this.get("timestamp")},getMessage:function(){return this.get("message")},getFilename:function(){return this.get("filename")},getMethod:function(){return this.get("method")},getLineNumber:function(){return this.get("line")},getClassDescriptor:function(){return this.get("class")},getThrowables:function(){return this.get("throwables")}})})(window);(function(B){var A=B.Gitana;A.LogEntryMap=A.AbstractMap.extend({constructor:function(C,D){this.objectType="Gitana.LogEntryMap";this.getPlatform=function(){return C};this.base(C.getDriver(),D)},clone:function(){return this.getFactory().logEntryMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().logEntry(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.CopyJob=A.Job.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.CopyJob"},getImports:function(){var G=[];var I=this.get("imports");for(var F=0;F<I.length;F++){var E=I[F];var D=E.sources;var C=E.targest;var H={sources:E.sources,targets:E.targets,getType:function(){return this.targets[this.targets.length-1]["typeId"]},getSourceId:function(){return this.sources[this.sources.length-1]["id"]},getTargetId:function(){return this.targets[this.targets.length-1]["id"]}};G.push(H)}return G},getSingleImportTargetId:function(){var C=null;var D=this.getImports();if(D.length>0){C=D[0].getTargetId()}return C}})})(window);(function(B){var A=B.Gitana;A.TransferImportJob=A.Job.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.TransferImportJob"},getImports:function(){var G=[];var I=this.get("imports");for(var F=0;F<I.length;F++){var E=I[F];var D=E.sources;var C=E.targest;var H={sources:E.sources,targets:E.targets,getType:function(){return this.targets[this.targets.length-1]["typeId"]},getSourceId:function(){return this.sources[this.sources.length-1]["id"]},getTargetId:function(){return this.targets[this.targets.length-1]["id"]}};G.push(H)}return G},getSingleImportTargetId:function(){var C=null;var D=this.getImports();if(D.length>0){C=D[0].getTargetId()}return C}})})(window);(function(B){var A=B.Gitana;A.TransferExportJob=A.Job.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.TransferExportJob"},getImports:function(){var G=[];var I=this.get("imports");for(var F=0;F<I.length;F++){var E=I[F];var D=E.sources;var C=E.targest;var H={sources:E.sources,targets:E.targets,getType:function(){return this.targets[this.targets.length-1]["typeId"]},getSourceId:function(){return this.sources[this.sources.length-1]["id"]},getTargetId:function(){return this.targets[this.targets.length-1]["id"]}};G.push(H)}return G},getSingleImportTargetId:function(){var C=null;var D=this.getImports();if(D.length>0){C=D[0].getTargetId()}return C}})})(window);(function(B){var A=B.Gitana;A.Platform=A.ContainedDataStore.extend({constructor:function(C,D){this.objectType="Gitana.Platform";this.base(C,D);this.getCluster=function(){return C};this.getClusterId=function(){return C.getId()}},getPlatform:function(){return this},readCluster:function(){return this.subchain(this.getCluster())},getUri:function(){return""},getType:function(){return A.TypedIDConstants.TYPE_PLATFORM},clone:function(){return this.getFactory().platform(this.getCluster(),this.object)},del:function(){return this},reload:function(){var C=function(){return this.getUri()+"/"};return this.chainReload(this.clone(),C)},update:function(){return this},readPrimaryDomain:function(){var D=this;var E=function(){return D.getUri()+"/domains/primary"};var C=this.getFactory().domain(this);return this.chainGet(C,E)},loadInfo:function(D){var C=function(){return"/info"};return this.chainGetResponse(this,C,{}).then(function(){D(this.response)})},listRepositories:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().repositoryMap(this);return this.chainGet(C,"/repositories",E)},readRepository:function(D){var C=this.getFactory().repository(this);return this.chainGet(C,"/repositories/"+D)},createRepository:function(D){var C=this.getFactory().repository(this);return this.chainCreate(C,D,"/repositories")},queryRepositories:function(E,D){var C=this.getFactory().repositoryMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/repositories/query",F,E)},checkRepositoryPermissions:function(D,F){var E=function(){return"/repositories/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listDomains:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().domainMap(this);return this.chainGet(C,"/domains",E)},readDomain:function(D){var C=this.getFactory().domain(this);return this.chainGet(C,"/domains/"+D)},createDomain:function(D){var C=this.getFactory().domain(this);return this.chainCreate(C,D,"/domains")},queryDomains:function(E,D){var C=this.getFactory().domainMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/domains/query",F,E)},checkDomainPermissions:function(D,F){var E=function(){return"/domains/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listVaults:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().vaultMap(this);return this.chainGet(C,"/vaults",E)},readVault:function(C){var D=this.getFactory().vault(this);return this.chainGet(D,"/vaults/"+C)},createVault:function(D){var C=this.getFactory().vault(this);return this.chainCreate(C,D,"/vaults")},queryVaults:function(E,D){var C=this.getFactory().vaultMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/vaults/query",F,E)},checkVaultPermissions:function(D,F){var E=function(){return"/vaults/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},authenticate:function(D,C){return this.getDriver().authenticate(D,C)},logout:function(){var D=this;var C=this.subchain(this);C.subchain().then(function(){D.getDriver().clearAuthentication()});return C},listStacks:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().stackMap(this);return this.chainGet(C,"/stacks",E)},readStack:function(D){var C=this.getFactory().stack(this);return this.chainGet(C,"/stacks/"+D)},createStack:function(D){if(!D){D={}}var C=this.getFactory().stack(this);return this.chainCreate(C,D,"/stacks")},queryStacks:function(F,D){var G={};if(D){A.copyInto(G,D)}var E=function(){return"/stacks/query"};var C=this.getFactory().stackMap(this);return this.chainPost(C,E,G,F)},checkStackPermissions:function(D,F){var E=function(){return"/stacks/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},queryLogEntries:function(G,D){var E=this;var F=function(){return E.getUri()+"/logs/query"};if(!G){G={}}var C=this.getFactory().logEntryMap(this.getCluster());var H={};if(D){A.copyInto(H,D)}return this.chainPost(C,F,H,G)},readLogEntry:function(F){var D=this;var E=function(){return D.getUri()+"/logs/"+F};var C=this.getFactory().logEntry(this.getCluster());return this.chainGet(C,E)},listRegistrars:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().registrarMap(this);return this.chainGet(C,"/registrars",E)},readRegistrar:function(D){var C=this.getFactory().registrar(this);return this.chainGet(C,"/registrars/"+D)},createRegistrar:function(D){var C=this.getFactory().registrar(this);return this.chainCreate(C,D,"/registrars")},queryRegistrars:function(E,D){var C=this.getFactory().registrarMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/registrars/query",F,E)},checkRegistrarPermissions:function(D,F){var E=function(){return"/registrars/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listApplications:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().applicationMap(this);return this.chainGet(C,"/applications",E)},readApplication:function(D){var C=this.getFactory().application(this);return this.chainGet(C,"/applications/"+D)},createApplication:function(D){var C=this.getFactory().application(this);return this.chainCreate(C,D,"/applications")},queryApplications:function(E,D){var C=this.getFactory().applicationMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/applications/query",F,E)},checkApplicationPermissions:function(D,F){var E=function(){return"/applications/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listClients:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().clientMap(this);return this.chainGet(C,"/clients",E)},readClient:function(C){var D=this.getFactory().client(this);return this.chainGet(D,"/clients/"+C)},createClient:function(D){if(!D){D={}}var C=this.getFactory().client(this);return this.chainCreate(C,D,"/clients")},queryClients:function(F,D){var G={};if(D){A.copyInto(G,D)}var E=function(){return"/clients/query"};var C=this.getFactory().clientMap(this);return this.chainPost(C,E,G,F)},checkClientPermissions:function(D,F){var E=function(){return"/clients/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listAuthenticationGrants:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().authenticationGrantMap(this);return this.chainGet(C,"/auth/grants",E)},readAuthenticationGrant:function(C){var D=this.getFactory().authenticationGrant(this);return this.chainGet(D,"/auth/grants/"+C)},createAuthenticationGrant:function(D){if(!D){D={}}var C=this.getFactory().authenticationGrant(this);return this.chainCreate(C,D,"/auth/grants")},queryAuthenticationGrants:function(F,D){var G={};if(D){A.copyInto(G,D)}var E=function(){return"/auth/grants/query"};var C=this.getFactory().authenticationGrantMap(this);return this.chainPost(C,E,G,F)},checkAuthenticationGrantPermissions:function(D,F){var E=function(){return"/auth/grants/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listDirectories:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().directoryMap(this);return this.chainGet(C,"/directories",E)},readDirectory:function(D){var C=this.getFactory().directory(this);return this.chainGet(C,"/directories/"+D)},createDirectory:function(D){var C=this.getFactory().directory(this);return this.chainCreate(C,D,"/directories")},queryDirectories:function(E,D){var C=this.getFactory().directoryMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/directories/query",F,E)},checkDirectoryPermissions:function(D,F){var E=function(){return"/directories/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listBillingProviderConfigurations:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().billingProviderConfigurationMap(this);return this.chainGet(C,"/billing/configurations",E)},readBillingProviderConfiguration:function(D){var C=this.getFactory().billingProviderConfiguration(this);return this.chainGet(C,"/billing/configurations/"+D)},createBillingProviderConfiguration:function(D,E){if(!E){E={}}E.providerId=D;var C=this.getFactory().billingProviderConfiguration(this);return this.chainCreate(C,E,"/billing/configurations")},queryBillingProviderConfigurations:function(F,D){var G={};if(D){A.copyInto(G,D)}var E=function(){return"/billing/configurations/query"};var C=this.getFactory().billingProviderConfigurationMap(this);return this.chainPost(C,E,G,F)},checkBillingProviderConfigurationPermissions:function(D,F){var E=function(){return"/billing/configurations/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listWebHosts:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().webHostMap(this);return this.chainGet(C,"/webhosts",E)},readWebHost:function(D){var C=this.getFactory().webHost(this);return this.chainGet(C,"/webhosts/"+D)},createWebHost:function(D){var C=this.getFactory().webHost(this);return this.chainCreate(C,D,"/webhosts")},queryWebHosts:function(E,D){var C=this.getFactory().webHostMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/webhosts/query",F,E)},checkWebHostPermissions:function(D,F){var E=function(){return"/webhosts/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listWarehouses:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().warehouseMap(this);return this.chainGet(C,"/warehouses",E)},readWarehouse:function(D){var C=this.getFactory().warehouse(this);return this.chainGet(C,"/warehouses/"+D)},createWarehouse:function(D){var C=this.getFactory().warehouse(this);return this.chainCreate(C,D,"/warehouses")},queryWarehouses:function(E,D){var C=this.getFactory().warehouseMap(this);var F={};if(D){A.copyInto(F,D)}return this.chainPost(C,"/warehouses/query",F,E)},checkWarehousePermissions:function(D,F){var E=function(){return"/warehouses/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listTenantAttachments:function(){var E=this;var F=this.clone();F.getUri=function(){return"/tenant"};var D=new A.BinaryAttachmentMap(F);var C=this.subchain(D);C.subchain().then(function(){var G=this;E.getDriver().gitanaGet(E.getUri()+"/tenant/attachments",null,function(H){var J={};for(var I=0;I<H.rows.length;I++){J[H.rows[I]["_doc"]]=H.rows[I]}D.handleMap(J);G.next()});return false});return C},tenantAttachment:function(C){return this.listTenantAttachments().select(C)},tenantAttach:function(F,H,E){var D=this;var G=this.clone();G.getUri=function(){return"/tenant"};var C=this.subchain(new A.BinaryAttachment(G,F));C.subchain().then(function(){var I=D.getUri()+"/tenant/attachments/"+F;this.chainUpload(this,I,null,H,E).then(function(){this.subchain(D).listTenantAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},tenantUnattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/tenant/attachments/"+C).then(function(){})})}})})(window);(function(B){var A=B.Gitana;A.AbstractPlatformDataStore=A.ContainedDataStore.extend({constructor:function(C,D){this.base(C,D);this.getPlatform=function(){return C};this.getPlatformId=function(){return C.getId()};this.getCluster=function(){return C.getCluster()};this.getClusterId=function(){return C.getClusterId()}},copy:function(G,E){var D=this;var F={sources:A.toCopyDependencyChain(this),targets:A.toCopyDependencyChain(G)};var C=this.getFactory().job(this.getCluster(),"copy");return this.link(C).then(function(){var H=this;this.getDriver().gitanaPost("/tools/copy?schedule=ASYNCHRONOUS",{},F,function(I){A.handleJobCompletion(H,D.getCluster(),I.getId(),!E)},function(I){D.httpError(I)});return false})}})})(window);(function(B){var A=B.Gitana;A.AbstractPlatformObject=A.AbstractSelfableACLObject.extend({constructor:function(C,D){this.base(C.getDriver(),D);this.getPlatform=function(){return C};this.getPlatformId=function(){return C.getId()};this.getCluster=function(){return C.getCluster()};this.getClusterId=function(){return C.getClusterId()}},exportArchive:function(F){var J=this;var K=F.vault;if(!A.isString(K)){K=K.getId()}var G=F.group;var I=F.artifact;var D=F.version;var E=(F.configuration?F.configuration:{});var C=(F.async?false:true);var H=this.getFactory().job(this.getCluster(),"export");return this.link(H).then(function(){var L=this;this.getDriver().gitanaPost(J.getUri()+"/export?vault="+K+"&group="+G+"&artifact="+I+"&version="+D+"&schedule=ASYNCHRONOUS",{},E,function(M){A.handleJobCompletion(L,J.getCluster(),M.getId(),C)},function(M){J.httpError(M)});return false})},importArchive:function(F){var J=this;var K=F.vault;if(!A.isString(K)){K=K.getId()}var G=F.group;var I=F.artifact;var D=F.version;var E=(F.configuration?F.configuration:{});var C=(F.async?false:true);var H=this.getFactory().job(this.getCluster(),"import");return this.link(H).then(function(){var L=this;this.getDriver().gitanaPost(J.getUri()+"/import?vault="+K+"&group="+G+"&artifact="+I+"&version="+D+"&schedule=ASYNCHRONOUS",{},E,function(M){A.handleJobCompletion(L,J.getCluster(),M.getId(),C)},function(M){J.httpError(M)});return false})},copy:function(G,E){var D=this;var F={sources:A.toCopyDependencyChain(this),targets:A.toCopyDependencyChain(G)};var C=this.getFactory().job(this.getCluster(),"copy");return this.link(C).then(function(){var H=this;this.getDriver().gitanaPost("/tools/copy?schedule=ASYNCHRONOUS",{},F,function(I){A.handleJobCompletion(H,D.getCluster(),I.getId(),!E)},function(I){D.httpError(I)});return false})}})})(window);(function(B){var A=B.Gitana;A.AbstractPlatformObjectMap=A.AbstractMap.extend({constructor:function(C,D){this.getPlatform=function(){return C};this.getPlatformId=function(){return C.getId()};this.getCluster=function(){return C.getCluster()};this.getClusterId=function(){return C.getClusterId()};this.base(C.getDriver(),D)}})})(window);(function(B){var A=B.Gitana;A.Stack=A.AbstractPlatformObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.Stack"},getType:function(){return A.TypedIDConstants.TYPE_STACK},getUri:function(){return"/stacks/"+this.getId()},clone:function(){return this.getFactory().stack(this.getPlatform(),this.object)},getKey:function(){return this.get("key")},readTeam:function(C){var E=function(){return this.getUri()+"/teams/"+C};var D=this.getFactory().team(this.getPlatform(),this,C);return this.chainGet(D,E)},listTeams:function(){var D=function(){return this.getUri()+"/teams"};var C=this.getFactory().teamMap(this.getCluster(),this);return this.chainGet(C,D)},createTeam:function(C,F){if(!F){F={}}var G=function(){return this.getUri()+"/teams?key="+C};var E=this;var D=this.getFactory().team(this.getPlatform(),this,C);return this.chainPostResponse(D,G,{},F).then(function(){this.subchain(E).readTeam(C).then(function(){A.copyInto(D.object,this.object)})})},readOwnersTeam:function(){return this.readTeam("owners")},listAttachments:function(F){var E=this;var D=new A.BinaryAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(F,G,E){var D=this;var C=this.subchain(new A.BinaryAttachment(this,F));C.subchain().then(function(){var H=D.getUri()+"/attachments/"+F;this.chainUpload(this,H,null,G,E).then(function(){this.subchain(D).listAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})},queryLogEntries:function(G,D){var E=this;var F=function(){return E.getUri()+"/logs/query"};if(!G){G={}}var C=this.getFactory().logEntryMap(this.getCluster());var H={};if(D){A.copyInto(H,D)}return this.chainPost(C,F,H,G)},readLogEntry:function(F){var D=this;var E=function(){return D.getUri()+"/logs/"+F};var C=this.getFactory().logEntry(this.getCluster());return this.chainGet(C,E)},assignDataStore:function(H,G){var D=this;var F=function(){return D.getUri()+"/datastores/assign"};var E=A.makeArray(arguments);var I;if(E.length==1){var C=E.shift();if(C.getType&&C.getId){I={type:C.getType(),id:C.getId()}}else{I=C}}else{H=E.shift();G=E.shift();I={type:H.getType(),id:H.getId()};if(G){I.key=G}}return this.chainPostEmpty(this,F,I)},unassignDataStore:function(E){var C=this;var D=function(){return C.getUri()+"/datastores/unassign"};var F={key:E};return this.chainPostEmpty(this,D,F)},listDataStores:function(D){var E=this;var F=function(){return E.getUri()+"/datastores"};var C=this.getFactory().platformDataStoreMap(this.getPlatform());var G={};if(D){A.copyInto(G,D)}return this.chainGet(C,F,G)},queryDataStores:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/datastores/query"};var C=this.getFactory().platformDataStoreMap(this.getPlatform());return this.chainPost(C,F,H,G)},existsDataStore:function(E,F){var C=this;var D=function(){return C.getUri()+"/datastores/exists?key="+E};return this.chainPostResponse(this,D).then(function(){F.call(this,this.response.exists)})}})})(window);(function(B){var A=B.Gitana;A.StackMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.StackMap";this.base(C,D)},clone:function(){return this.getFactory().stackMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().stack(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.Client=A.AbstractPlatformObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.Client"},getType:function(){return A.TypedIDConstants.TYPE_CLIENT},getUri:function(){return"/clients/"+this.getId()},clone:function(){return this.getFactory().client(this.getPlatform(),this.object)},getAuthorizedGrantTypes:function(){return this.get("authorizedGrantTypes")},getScope:function(){return this.get("scope")},getAllowOpenDriverAuthentication:function(){return this.get("allowOpenDriverAuthentication")},getEnabled:function(){return this.get("enabled")}})})(window);(function(B){var A=B.Gitana;A.ClientMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.ClientMap";this.base(C,D)},clone:function(){return this.getFactory().clientMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().client(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.AuthenticationGrant=A.AbstractPlatformObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.AuthenticationGrant"},getType:function(){return A.TypedIDConstants.TYPE_AUTHENTICATION_GRANT},getUri:function(){return"/auth/grants/"+this.getId()},clone:function(){return this.getFactory().authenticationGrant(this.getPlatform(),this.object)},getKey:function(){return this.get("key")},getSecret:function(){return this.get("secret")},getPrincipalDomainId:function(){return this.get("principalDomainId")},getPrincipalId:function(){return this.get("principalId")},getClientId:function(){return this.get("clientId")},getEnabled:function(){return this.get("enabled")},getAllowOpenDriverAuthentication:function(){return this.get("allowOpenDriverAuthentication")}})})(window);(function(B){var A=B.Gitana;A.AuthenticationGrantMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.AuthenticationGrantMap";this.base(C,D)},clone:function(){return this.getFactory().authenticationGrantMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().authenticationGrant(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.PlatformDataStoreMap=A.AbstractMap.extend({constructor:function(C,D){this.objectType="Gitana.PlatformDataStoreMap";this.getPlatform=function(){return C};this.base(C.getDriver(),D)},clone:function(){return this.getFactory().platformDataStoreMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().platformDataStore(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.BillingProviderConfiguration=A.AbstractPlatformObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.BillingProviderConfiguration"},getType:function(){return A.TypedIDConstants.TYPE_BILLING_PROVIDER_CONFIGURATION},getUri:function(){return"/billing/configurations/"+this.getId()},clone:function(){return this.getFactory().billingProviderConfiguration(this.getPlatform(),this.object)}})})(window);(function(B){var A=B.Gitana;A.BillingProviderConfigurationMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.BillingProviderConfigurationMap";this.base(C,D)},clone:function(){return this.getFactory().billingProviderConfigurationMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().billingProviderConfiguration(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.ClientMethods={getKey:function(){return this.get("key")},getSecret:function(){return this.get("secret")},getDomainUrls:function(){return this.get("domainUrls")},getIsTenantDefault:function(){return this.get("isTenantDefault")},getDefaultTenantId:function(){return this.get("defaultTenantId")},getAuthorizedGrantTypes:function(){return this.get("authorizedGrantTypes")},getScope:function(){return this.get("scope")},getRegisteredRedirectUri:function(){return this.get("registeredRedirectUri")},getAllowOpenDriverAuthentication:function(){return this.get("allowOpenDriverAuthentication")},getEnabled:function(){return this.get("enabled")},getAllowAutoApprovalForImplicitFlow:function(){return this.get("allowAutoApprovalForImplicitFlow")}}})(window);(function(B){var A=B.Gitana;A.Application=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.objectType="Gitana.Application";this.base(C,D)},getUri:function(){return"/applications/"+this.getId()},getType:function(){return A.TypedIDConstants.TYPE_APPLICATION},clone:function(){return this.getFactory().application(this.getPlatform(),this.object)},listAutoClientMappingObjects:function(G,C){var D=this;var E=function(){return D.getUri()+"/autoclientmappings"};var F={};if(C){A.copyInto(F,C)}return this.chainGetResponse(this,E,F).then(function(){G.call(this,this.response.rows)})},createSettings:function(D){if(D.settings==null){D.settings={}}var C=this.getFactory().settings(this);return this.chainCreate(C,D,this.getUri()+"/settings")},listSettings:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().settingsMap(this);return this.chainGet(C,this.getUri()+"/settings",E)},readSettings:function(D){var C=this.getFactory().settings(this);return this.chainGet(C,this.getUri()+"/settings/"+D)},querySettings:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/settings/query"};var C=this.getFactory().settingsMap(this);return this.chainPost(C,F,H,G)},readApplicationSettings:function(H,F){var D=this;if(H==null){H="application"}if(F==null){F="application"}var E={scope:H,key:F};var G=new A.Settings(this,E);var C=this.subchain(G);C.subchain().then(function(){var J=this;var L=D.getDriver();var I=D.getUri()+"/settings";var K=D.getUri()+"/settings/query";L.gitanaPost(K,{},E,function(M){var N=new A.SettingsMap(D);N.handleResponse(M);if(N.keys.length>0){var O=N.map[N.keys[0]];C.loadFrom(O);J.next()}else{E.settings={};L.gitanaPost(I,null,E,function(P){L.gitanaGet(I+"/"+P.getId(),null,function(Q){J.handleResponse(Q);J.next()},function(Q){D.httpError(Q)})},function(P){D.httpError(P)})}},function(M){D.httpError(M)});return false});return C},readApplicationPrincipalSettings:function(){var C=A.makeArray(arguments);if(C.length==1){var F=C.shift();return this.readApplicationSettings("principal",F.getDomainQualifiedId())}else{if(C.length==2){var E=C.shift();var D=C.shift();return this.readApplicationSettings("principal",E+"/"+D)}}},checkSettingPermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/settings/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})},createRegistration:function(D){var C=this.getFactory().registration(this);return this.chainCreate(C,D,this.getUri()+"/registrations")},listRegistrations:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().registrationMap(this);return this.chainGet(C,this.getUri()+"/registrations",E)},readRegistration:function(D){var C=this.getFactory().registration(this);return this.chainGet(C,this.getUri()+"/registrations/"+D)},queryRegistrations:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/registrations/query"};var C=this.getFactory().registrationMap(this);return this.chainPost(C,F,H,G)},checkRegistrationPermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/registrations/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})},createEmailProvider:function(D){var C=this.getFactory().emailProvider(this);return this.chainCreate(C,D,this.getUri()+"/emailproviders")},listEmailProviders:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().emailProviderMap(this);return this.chainGet(C,this.getUri()+"/emailproviders",E)},readEmailProvider:function(D){var C=this.getFactory().emailProvider(this);return this.chainGet(C,this.getUri()+"/emailproviders/"+emailId)},queryEmailProviders:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/emailproviders/query"};var C=this.getFactory().emailProviderMap(this);return this.chainPost(C,F,H,G)},checkEmailProviderPermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/emailproviders/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})},createEmail:function(D){var C=this.getFactory().email(this);return this.chainCreate(C,D,this.getUri()+"/emails")},listEmails:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().emailMap(this);return this.chainGet(C,this.getUri()+"/emails",E)},readEmail:function(D){var C=this.getFactory().email(this);return this.chainGet(C,this.getUri()+"/emails/"+D)},queryEmails:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/emails/query"};var C=this.getFactory().emailMap(this);return this.chainPost(C,F,H,G)},checkEmailPermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/emails/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})}})})(window);(function(B){var A=B.Gitana;A.ApplicationMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.ApplicationMap";this.base(C,D)},clone:function(){return this.getFactory().applicationMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().application(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.Settings=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Settings";this.systemKeys=["key","scope","_system","_doc","title","description"];this.rootKey="settings";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_SETTINGS},getUri:function(){return"/applications/"+this.getApplicationId()+"/settings/"+this.getId()},getSettings:function(){return this.get(this.rootKey)},getSetting:function(C){return this.getSettings()!=null?this.getSettings()[C]:null},setSetting:function(C,D){if(this.getSettings()==null){this.object[this.rootKey]={};this.object[this.rootKey][C]=D}else{this.getSettings()[C]=D}},listAttachments:function(F){var E=this;var D=new A.BinaryAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(F,G,E){var D=this;var C=this.subchain(new A.BinaryAttachment(this,F));C.subchain().then(function(){var H=D.getUri()+"/attachments/"+F;this.chainUpload(this,H,null,G,E).then(function(){this.subchain(D).listAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})}})})(window);(function(B){var A=B.Gitana;A.SettingsMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.SettingsMap";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().settingsMap(this.getApplication(),this.object)},buildObject:function(C){return this.getFactory().settings(this.getApplication(),C)}})})(window);(function(B){var A=B.Gitana;A.Email=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Email";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_EMAIL},getUri:function(){return"/applications/"+this.getApplicationId()+"/emails/"+this.getId()},send:function(C){return this.then(function(){this.subchain(C).send(this)})}})})(window);(function(B){var A=B.Gitana;A.EmailMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.EmailMap";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().emailMap(this.getApplication(),this.object)},buildObject:function(C){return this.getFactory().email(this.getApplication(),C)}})})(window);(function(B){var A=B.Gitana;A.EmailProvider=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.EmailProvider";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_EMAIL_PROVIDER},getUri:function(){return"/applications/"+this.getApplicationId()+"/emailproviders/"+this.getId()},send:function(C){var D=null;if(A.isString(C)){D=C}else{D=C.getId()}return this.chainPostEmpty(this,this.getUri()+"/send?email="+D)}})})(window);(function(B){var A=B.Gitana;A.EmailProviderMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.EmailProviderMap";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().emailProviderMap(this.getApplication(),this.object)},buildObject:function(C){return this.getFactory().emailProvider(this.getApplication(),C)}})})(window);(function(B){var A=B.Gitana;A.Registration=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Registration";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_REGISTRATION},getUri:function(){return"/applications/"+this.getApplicationId()+"/registrations/"+this.getId()},sendConfirmationEmail:function(){var C=this;var D=function(){return C.getUri()+"/send/confirmation"};return this.chainPostEmpty(this,D,{},this.object)},sendWelcomeEmail:function(){var C=this;var D=function(){return C.getUri()+"/send/welcome"};return this.chainPostEmpty(this,D,{},this.object)},confirm:function(G,E){if(!E){E={}}var F={password:G};var C=this;var D=function(){return C.getUri()+"/confirm"};return this.chainPostEmpty(this,D,F,E)}})})(window);(function(B){var A=B.Gitana;A.RegistrationMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.RegistrationMap";this.getApplication=function(){return D};this.getApplicationId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().registrationMap(this.getApplication(),this.object)},buildObject:function(C){return this.getFactory().registration(this.getApplication(),C)}})})(window);(function(B){var A=B.Gitana;A.Warehouse=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.objectType="Gitana.Warehouse";this.base(C,D)},getUri:function(){return"/warehouses/"+this.getId()},getType:function(){return A.TypedIDConstants.TYPE_WAREHOUSE},clone:function(){return this.getFactory().warehouse(this.getPlatform(),this.object)},listInteractions:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionMap(this);return this.chainGet(C,this.getUri()+"/interactions",E)},readInteraction:function(D){var C=this.getFactory().interaction(this);return this.chainGet(C,this.getUri()+"/interactions/"+D)},queryInteractions:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/interactions/query"};var C=this.getFactory().interactionMap(this);return this.chainPost(C,F,H,G)},listInteractionApplications:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionApplicationMap(this);return this.chainGet(C,this.getUri()+"/applications",E)},readInteractionApplication:function(D){var C=this.getFactory().interactionApplication(this);return this.chainGet(C,this.getUri()+"/applications/"+D)},queryInteractionApplications:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/applications/query"};var C=this.getFactory().interactionApplicationMap(this);return this.chainPost(C,F,H,G)},listInteractionSessions:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionSessionMap(this);return this.chainGet(C,this.getUri()+"/sessions",E)},readInteractionSession:function(D){var C=this.getFactory().interactionSession(this);return this.chainGet(C,this.getUri()+"/sessions/"+D)},queryInteractionSessions:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/sessions/query"};var C=this.getFactory().interactionSessionMap(this);return this.chainPost(C,F,H,G)},listInteractionPages:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionPageMap(this);return this.chainGet(C,this.getUri()+"/pages",E)},readInteractionPage:function(D){var C=this.getFactory().interactionPage(this);return this.chainGet(C,this.getUri()+"/pages/"+D)},queryInteractionPages:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/pages/query"};var C=this.getFactory().interactionPageMap(this);return this.chainPost(C,F,H,G)},listInteractionNodes:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionNodeMap(this);return this.chainGet(C,this.getUri()+"/nodes",E)},readInteractionNode:function(D){var C=this.getFactory().interactionNode(this);return this.chainGet(C,this.getUri()+"/nodes/"+D)},queryInteractionNodes:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/nodes/query"};var C=this.getFactory().interactionNodeMap(this);return this.chainPost(C,F,H,G)},listInteractionUsers:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionUserMap(this);return this.chainGet(C,this.getUri()+"/users",E)},readInteractionUser:function(D){var C=this.getFactory().interactionUser(this);return this.chainGet(C,this.getUri()+"/users/"+D)},queryInteractionUsers:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/users/query"};var C=this.getFactory().interactionUserMap(this);return this.chainPost(C,F,H,G)},listInteractionReports:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionReportMap(this);return this.chainGet(C,this.getUri()+"/reports",E)},readInteractionReport:function(D){var C=this.getFactory().interactionReport(this);return this.chainGet(C,this.getUri()+"/reports/"+D)},queryInteractionReports:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/reports/query"};var C=this.getFactory().interactionReportMap(this);return this.chainPost(C,F,H,G)},loadInfo:function(E){var C=this;var D=function(){return C.getUri()+"/info"};return this.chainGetResponse(this,D,{}).then(function(){E(this.response)})}})})(window);(function(B){var A=B.Gitana;A.WarehouseMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.WarehouseMap";this.base(C,D)},clone:function(){return this.getFactory().warehouseMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().warehouse(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.AbstractWarehouseObject=A.AbstractPlatformObject.extend({constructor:function(C,D){this.base(C.getPlatform(),D);this.getWarehouse=function(){return C};this.getWarehouseId=function(){return C.getId()}}})})(window);(function(B){var A=B.Gitana;A.AbstractWarehouseObjectMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.getWarehouse=function(){return C};this.getWarehouseId=function(){return C.getId()};this.base(C.getPlatform(),D)}})})(window);(function(B){var A=B.Gitana;A.AbstractReportableWarehouseObject=A.AbstractWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.interactionObjectTypeId=null},listReports:function(C){return this.queryReports({},C)},readReport:function(C){return this.queryReports({key:C}).keepOne()},queryReports:function(D,C){if(!D){D={}}D.objectTypeId=this.interactionObjectTypeId;D.objectId=this.getId();return this.subchain(this.getWarehouse()).queryInteractionReports(D,C)}})})(window);(function(B){var A=B.Gitana;A.Interaction=A.AbstractWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.Interaction"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/interactions/"+this.getId()},getInteractionApplicationId:function(){return this.get("interactionApplicationId")},getInteractionSessionId:function(){return this.get("interactionSessionId")},getInteractionPageId:function(){return this.get("interactionPageId")},getInteractionUserId:function(){return this.get("interactionUserId")},getInteractionNodeId:function(){return this.get("interactionNodeId")},getSourceUserAgent:function(){return this.object.source["user-agent"]},getSourceHost:function(){return this.object.source["host"]},getSourceIP:function(){return this.object.source["ip"]},getEventType:function(){return this.object.event["type"]},getEventX:function(){return this.object.event["x"]},getEventY:function(){return this.object.event["y"]},getEventOffsetX:function(){return this.object.event["offsetX"]},getEventOffsetY:function(){return this.object.event["offsetY"]},getApplicationHost:function(){return this.object.application["host"]},getApplicationUrl:function(){return this.object.application["url"]},getApplicationUri:function(){return this.object.application["uri"]},getElementId:function(){return this.object.element["id"]},getElementType:function(){return this.object.element["type"]},getElementPath:function(){return this.object.element["path"]},getNodeRepositoryId:function(){return this.object.node["repositoryId"]},getNodeBranchId:function(){return this.object.node["branchId"]},getNodeId:function(){return this.object.node["id"]},getTimestampStart:function(){return this.object.timestamp["start"]},getTimestampEnd:function(){return this.object.timestamp["end"]},getTimestampMs:function(){return this.object.timestamp["ms"]},getPrincipalDomainId:function(){return this.object.principal["domainId"]},getPrincipalId:function(){return this.object.principal["id"]}})})(window);(function(B){var A=B.Gitana;A.InteractionMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionMap";this.base(C,D)},clone:function(){return this.getFactory().interactionMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interaction(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.InteractionApplication=A.AbstractReportableWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.InteractionApplication";this.interactionObjectTypeId="application"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION_APPLICATION},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/applications/"+this.getId()},getTimestampStart:function(){return this.get("timestamp")["start"]},getTimestampEnd:function(){return this.get("timestamp")["end"]},listInteractions:function(C){return this.queryInteractions(null,C)},queryInteractions:function(D,C){if(!D){D={}}D.interactionApplicationId=this.getId();return this.subchain(this.getWarehouse()).queryInteractions(D,C)},listSessions:function(C){return this.querySessions(null,C)},querySessions:function(D,C){if(!D){D={}}D.interactionApplicationId=this.getId();return this.subchain(this.getWarehouse()).queryInteractionSessions(D,C)},listPages:function(C){return this.queryPages(null,C)},queryPages:function(D,C){if(!D){D={}}D.interactionApplicationId=this.getId();return this.subchain(this.getWarehouse()).queryInteractionPages(D,C)}})})(window);(function(B){var A=B.Gitana;A.InteractionApplicationMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionApplicationMap";this.base(C,D)},clone:function(){return this.getFactory().interactionApplicationMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interactionApplication(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.InteractionSession=A.AbstractReportableWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.InteractionSession";this.interactionObjectTypeId="session"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION_SESSION},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/sessions/"+this.getId()},getInteractionApplicationId:function(){return this.get("interactionApplicationId")},getTimestampStart:function(){return this.get("timestamp")["start"]},getTimestampEnd:function(){return this.get("timestamp")["end"]},listInteractions:function(C){return this.queryInteractions(null,C)},queryInteractions:function(D,C){if(!D){D={}}D.interactionSessionId=this.getId();return this.subchain(this.getWarehouse()).queryInteractions(D,C)}})})(window);(function(B){var A=B.Gitana;A.InteractionSessionMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionSessionMap";this.base(C,D)},clone:function(){return this.getFactory().interactionSessionMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interactionSession(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.InteractionPage=A.AbstractReportableWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.InteractionPage";this.interactionObjectTypeId="page"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION_PAGE},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/pages/"+this.getId()},getInteractionApplicationId:function(){return this.get("interactionApplicationId")},getPageUri:function(){return this.get("uri")},listAttachments:function(F){var E=this;var D=new A.BinaryAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(F,G,E){var D=this;var C=this.subchain(new A.BinaryAttachment(this,F));C.subchain().then(function(){var H=D.getUri()+"/attachments/"+F;this.chainUpload(this,H,null,G,E).then(function(){this.subchain(D).listAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})},listInteractions:function(C){return this.queryInteractions(null,C)},queryInteractions:function(D,C){if(!D){D={}}D.interactionPageId=this.getId();return this.subchain(this.getWarehouse()).queryInteractions(D,C)},capture:function(){var C=this;var D=function(){return C.getUri()+"/capture"};return this.chainPostEmpty(this,D)}})})(window);(function(B){var A=B.Gitana;A.InteractionPageMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionPageMap";this.base(C,D)},clone:function(){return this.getFactory().interactionPageMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interactionPage(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.InteractionNode=A.AbstractReportableWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.InteractionNode";this.interactionObjectTypeId="node"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION_NODE},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/nodes/"+this.getId()},getRepositoryId:function(){return this.get("repositoryId")},getBranchId:function(){return this.get("branchId")},getNodeId:function(){return this.get("nodeId")},listAttachments:function(F){var E=this;var D=new A.BinaryAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(F,G,E){var D=this;var C=this.subchain(new A.BinaryAttachment(this,F));C.subchain().then(function(){var H=D.getUri()+"/attachments/"+F;this.chainUpload(this,H,null,G,E).then(function(){this.subchain(D).listAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})},listInteractions:function(C){return this.queryInteractions(null,C)},queryInteractions:function(D,C){if(!D){D={}}D.interactionNodeId=this.getId();return this.subchain(this.getWarehouse()).queryInteractions(D,C)},capture:function(){var C=this;var D=function(){return C.getUri()+"/capture"};return this.chainPostEmpty(this,D)}})})(window);(function(B){var A=B.Gitana;A.InteractionNodeMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionNodeMap";this.base(C,D)},clone:function(){return this.getFactory().interactionNodeMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interactionNode(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.InteractionUser=A.AbstractReportableWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.InteractionUser";this.interactionObjectTypeId="user"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION_SESSION},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/users/"+this.getId()},getKey:function(){return this.get("key")},listInteractions:function(C){return this.queryInteractions(null,C)},queryInteractions:function(D,C){if(!D){D={}}D.interactionUserId=this.getId();return this.subchain(this.getWarehouse()).queryInteractions(D,C)}})})(window);(function(B){var A=B.Gitana;A.InteractionUserMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionUserMap";this.base(C,D)},clone:function(){return this.getFactory().interactionUserMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interactionUser(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.InteractionReport=A.AbstractWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.InteractionReport"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION_REPORT},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/reports/"+this.getId()},getObjectTypeId:function(){return this.get("objectTypeId")},getObjectId:function(){return this.get("objectId")},getKey:function(){return this.get("key")},listEntries:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().interactionReportEntryMap(this);return this.chainGet(C,this.getUri()+"/entries",E)},readEntry:function(D){var C=this.getFactory().interactionReportEntry(this);return this.chainGet(C,this.getUri()+"/entries/"+D)},queryEntries:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/entries/query"};var C=this.getFactory().interactionReportEntryMap(this);return this.chainPost(C,F,H,G)}})})(window);(function(B){var A=B.Gitana;A.InteractionReportMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionReportMap";this.base(C,D)},clone:function(){return this.getFactory().interactionReportMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interactionReport(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.InteractionReportEntry=A.AbstractWarehouseObject.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.InteractionReportEntry"},getType:function(){return A.TypedIDConstants.TYPE_INTERACTION_REPORT_ENTRY},getUri:function(){return"/warehouses/"+this.getWarehouseId()+"/reports/"+this.getReportId()+"/entries/"+this.getId()},getReportId:function(){return this.get("reportId")},getKey:function(){return this.get("key")},getApplicationId:function(){return this.get("applicationId")},getApplicationTitle:function(){return this.get("applicationTitle")},getApplicationDescription:function(){return this.get("applicationDescription")},getSessionId:function(){return this.get("sessionId")},getSessionTitle:function(){return this.get("sessionTitle")},getSessionDescription:function(){return this.get("sessionDescription")},getPageId:function(){return this.get("pageId")},getPageUri:function(){return this.get("pageUri")},getPageTitle:function(){return this.get("pageTitle")},getPageDescription:function(){return this.get("pageDescription")},getNodeId:function(){return this.get("nodeId")},getNodeTargetRepositoryId:function(){return this.get("nodeTargetRepositoryId")},getNodeTargetBranchId:function(){return this.get("nodeTargetBranchId")},getNodeTargetId:function(){return this.get("nodeTargetId")},getNodeTitle:function(){return this.get("nodeTitle")},getNodeDescription:function(){return this.get("nodeDescription")},getUserId:function(){return this.get("userId")},getUserTitle:function(){return this.get("userTitle")},getUserDescription:function(){return this.get("userDescription")},getUserFirstName:function(){return this.get("userFirstName")},getUserLastName:function(){return this.get("userLastName")},getUserEmail:function(){return this.get("userEmail")},getUserName:function(){return this.get("userName")}})})(window);(function(B){var A=B.Gitana;A.InteractionReportEntryMap=A.AbstractWarehouseObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.InteractionReportEntryMap";this.base(C,D)},clone:function(){return this.getFactory().interactionReportEntryMap(this.getWarehouse(),this.object)},buildObject:function(C){return this.getFactory().interactionReportEntry(this.getWarehouse(),C)}})})(window);(function(B){var A=B.Gitana;A.Directory=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.objectType="Gitana.Directory";this.base(C,D)},getUri:function(){return"/directories/"+this.getId()},getType:function(){return A.TypedIDConstants.TYPE_DIRECTORY},clone:function(){return this.getFactory().directory(this.getPlatform(),this.object)},readIdentity:function(F){var D=this;var E=function(){return D.getUri()+"/identities/"+F};var C=this.getFactory().identity(this);return this.chainGet(C,E)}})})(window);(function(B){var A=B.Gitana;A.DirectoryMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.DirectoryMap";this.base(C,D)},clone:function(){return this.getFactory().directoryMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().directory(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.Identity=A.AbstractPlatformObject.extend({constructor:function(C,D){this.base(C.getPlatform(),D);this.objectType="Gitana.Identity";this.getDirectory=function(){return C};this.getDirectoryId=function(){return C.getId()}},getType:function(){return A.TypedIDConstants.TYPE_IDENTITY},getUri:function(){return"/directories/"+this.getDirectoryId()+"/identities/"+this.getId()},clone:function(){return this.getFactory().identity(this.getDirectory(),this.object)},changePassword:function(D,E){var C={password:D,verifyPassword:E};return this.chainPostEmpty(this,this.getUri()+"/changepassword",{},C)},findUsers:function(D){var E=this;var F=function(){return E.getUri()+"/users"};var C=this.getFactory().domainPrincipalMap(this);var G={};if(D){A.copyInto(G,D)}return this.chainGet(C,F,G)},findUserForTenant:function(C){var E=this;var F=function(){return E.getUri()+"/user"};var D=this.getFactory().domainPrincipal(this);var G={};G.tenantId=C;return this.chainGet(D,F,G)},findTenants:function(H,D){var E=this;var H=null;var D=null;if(arguments.length==0){}else{if(arguments.length==1){var F=arguments[0];if(A.isString(F)){H=arguments[0]}else{D=arguments[1]}}else{H=arguments[0];D=arguments[1]}}var G=function(){return E.getUri()+"/tenants"};var C=this.getFactory().tenantMap(this);var I={};if(D){A.copyInto(I,D)}if(H){I.registrarId=H}return this.chainGet(C,G,I)}})})(window);(function(B){var A=B.Gitana;A.IdentityMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.IdentityMap";this.getDirectory=function(){return C};this.getDirectoryId=function(){return C.getId()};this.base(C.getPlatform(),D)},clone:function(){return this.getFactory().identityMap(this.getDirectory(),this.object)},buildObject:function(C){return this.getFactory().identity(this.getDirectory(),C)}})})(window);(function(B){var A=B.Gitana;A.Domain=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.Domain"},getUri:function(){return"/domains/"+this.getId()},getType:function(){return A.TypedIDConstants.TYPE_DOMAIN},clone:function(){return this.getFactory().domain(this.getPlatform(),this.object)},listPrincipals:function(D){var E=this;var G={};if(D){A.copyInto(G,D)}var F=function(){return E.getUri()+"/principals"};var C=this.getFactory().domainPrincipalMap(this.getCluster());return this.chainGet(C,F,G)},readPrincipal:function(F){var D=this;var E=function(){return D.getUri()+"/principals/"+F};var C=this.getFactory().domainPrincipal(this);return this.chainGet(C,E)},createPrincipal:function(E){var D=this;if(!E){E={}}if(!E.name){alert("missing name");return }if(!E.type){alert("missing type");return }var F=function(){return D.getUri()+"/principals"};var C=this.getFactory().domainPrincipal(this,E);return this.chainCreate(C,E,F)},queryPrincipals:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/principals/query"};var C=this.getFactory().domainPrincipalMap(this.getCluster());return this.chainPost(C,F,H,G)},listGroups:function(C){var D={type:"GROUP"};return this.queryPrincipals(D,C)},createGroup:function(C){if(!C){C={}}C.type="GROUP";return this.createPrincipal(C)},queryGroups:function(D,C){if(!D){D={}}D.type="GROUP";return this.queryPrincipals(D,C)},listUsers:function(C){var D={type:"USER"};return this.queryPrincipals(D,C)},createUser:function(C){if(!C){C={}}C.type="USER";return this.createPrincipal(C)},queryUsers:function(D,C){if(!D){D={}}D.type="USER";return this.queryPrincipals(D,C)},addMember:function(H,G){var C=this;var E=this.extractPrincipalIdentifiers(H,this.getId())["principal"];var F=this.extractPrincipalDomainQualifiedId(G);var D=function(){return C.getUri()+"/principals/"+E+"/members/add?id="+F};return this.chainPostEmpty(this,D)},removeMember:function(H,G){var C=this;var E=this.extractPrincipalIdentifiers(H,this.getId())["principal"];var F=this.extractPrincipalDomainQualifiedId(G);var D=function(){return C.getUri()+"/principals/"+E+"/members/remove?id="+F};return this.chainPostEmpty(this,D)},listMembers:function(I,C,J,D){var K=this;var E={};if(J){A.copyInto(E,J)}if(C){E.filter=C}if(D){E.indirect=true}var F=this.extractPrincipalIdentifiers(I,this.getId())["principal"];var H=function(){return K.getUri()+"/principals/"+F+"/members"};var G=this.getFactory().domainPrincipalMap(this.getCluster());return this.chainGet(G,H,E)},checkPrincipalPermissions:function(E,G){var C=this;var D={checks:E};var F=function(){return C.getUri()+"/principals/permissions/check"};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})}})})(window);(function(B){var A=B.Gitana;A.DomainMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.DomainMap";this.base(C,D)},clone:function(){return this.getFactory().domainMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().domain(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.DomainPrincipal=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.DomainPrincipal";this.getDomain=function(){return D};this.getDomainId=function(){return D.getId()}},getUri:function(){return"/domains/"+this.getDomainId()+"/principals/"+this.getId()},clone:function(){return this.getFactory().domainPrincipal(this.getDomain(),this.object)},beforeChainRun:function(){this.getFactory().extendPrincipal(this)},getName:function(){return this.get("name")},getType:function(){return this.get("type")},getDomainQualifiedName:function(){return this.getDomainId()+"/"+this.getName()},getDomainQualifiedId:function(){return this.getDomainId()+"/"+this.getId()},listMemberships:function(F,D){var G={};if(D){A.copyInto(G,D)}var E=function(){var H=this.getUri()+"/memberships";if(F){H=H+"?indirect=true"}return H};var C=this.getFactory().domainPrincipalMap(this.getCluster());return this.chainGet(C,E,G)},listAttachments:function(F){var E=this;var D=new A.BinaryAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(F,G,E){var D=this;var C=this.subchain(new A.BinaryAttachment(this,F));C.subchain().then(function(){var H=D.getUri()+"/attachments/"+F;this.chainUpload(this,H,null,G,E).then(function(){this.subchain(D).listAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})}})})(window);(function(B){var A=B.Gitana;A.PrincipalMap=A.AbstractMap.extend({constructor:function(C,D){this.objectType="Gitana.PrincipalMap";this.getCluster=function(){return C};this.base(C.getDriver(),D)},clone:function(){return this.getFactory().domainPrincipalMap(this.getCluster(),this.object)},buildObject:function(D){var F=D.domainId;var C=this.getDriver().currentPlatform;var E=this.getFactory().domain(C,{_doc:F});return this.getFactory().domainPrincipal(E,D)}})})(window);(function(B){var A=B.Gitana;A.DomainGroup={TYPE:"GROUP",readGroupNode:function(E,D){var C=this.subchain(this.getFactory().node(E,"n:group"));C.subchain(E).readGroupNode(this.getId(),D).then(function(){C.handleResponse(this.object)});return C},listMembers:function(G,H,D){var E=this;var I={};if(D){A.copyInto(I,D)}if(G){I.filter=G}if(H){I.indirect=true}var F=function(){return E.getUri()+"/members"};var C=this.getFactory().domainPrincipalMap(this.getCluster());return this.chainGet(C,F,I)},listUsers:function(){var F=false;var D=null;var E=A.makeArray(arguments);var C=E.shift();if(A.isBoolean(C)){F=C;D=E.shift()}else{D=E.shift()}return this.listMembers("user",F,D)},listGroups:function(){var F=false;var D=null;var E=A.makeArray(arguments);var C=E.shift();if(A.isBoolean(C)){F=C;D=E.shift()}else{D=C}return this.listMembers("group",F,D)},addMember:function(D){var C=this.extractPrincipalDomainQualifiedId(D);return this.chainPostEmpty(this,this.getUri()+"/members/add?id="+C)},removeMember:function(D){var C=this.extractPrincipalDomainQualifiedId(D);return this.chainPostEmpty(this,this.getUri()+"/members/remove?id="+C)}}})(window);(function(B){var A=B.Gitana;A.DomainUser={TYPE:"USER",readPersonNode:function(E,D){var C=this.subchain(this.getFactory().node(E,"n:person"));C.subchain(E).readPersonNode(this.getDomainQualifiedId(),D).then(function(){C.handleResponse(this.object)});return C},hasIdentity:function(){return(this.getDirectoryId()&&this.getIdentityId())},getDirectoryId:function(){return this.get("directoryId")},getIdentityId:function(){return this.get("identityId")},readDirectory:function(){var D=this.getFactory().directory(this.getPlatform(),{_doc:this.getDirectoryId()});var C=this.subchain(D);C.subchain(this.getPlatform()).readDirectory(this.getDirectoryId()).then(function(){C.handleResponse(this.object)});return C},readIdentity:function(){var F=this;var D=this.getFactory().directory(this.getPlatform(),{_doc:this.getDirectoryId()});var E=this.getFactory().identity(D,{_doc:this.getIdentityId()});var C=this.subchain(E);C.subchain(this.getPlatform()).readDirectory(F.getDirectoryId()).then(function(){D.handleResponse(this.object);this.readIdentity(F.getIdentityId()).then(function(){E.handleResponse(this.object)})});return C},getFirstName:function(){return this.get("firstName")},setFirstName:function(C){this.set("firstName",C)},getLastName:function(){return this.get("lastName")},setLastName:function(C){this.set("lastName",C)},getCompanyName:function(){return this.get("companyName")},setCompanyName:function(C){this.set("companyName",C)},getEmail:function(){return this.get("email")},setEmail:function(C){this.set("email",C)},getJobTitle:function(){return this.get("jobTitle")},setJobTitle:function(C){this.set("jobTitle",C)},getAddress:function(){return this.get("address")},setAddress:function(C){this.set("address",C)},getCity:function(){return this.get("city")},setCity:function(C){this.set("city",C)},getState:function(){return this.get("state")},setState:function(C){this.set("state",C)},getZipcode:function(){return this.get("zipcode")},setZipcode:function(C){this.set("zipcode",C)},getPhoneNumber:function(){return this.get("phoneNumber")},setPhoneNumber:function(C){this.set("phoneNumber",C)}}})(window);(function(B){var A=B.Gitana;A.Registrar=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.objectType="Gitana.Registrar";this.base(C,D)},getUri:function(){return"/registrars/"+this.getId()},getType:function(){return A.TypedIDConstants.TYPE_REGISTRAR},clone:function(){return this.getFactory().registrar(this.getPlatform(),this.object)},listTenants:function(D){var E=this;var F=function(){return E.getUri()+"/tenants"};var G={};if(D){A.copyInto(G,D)}var C=this.getFactory().tenantMap(this);return this.chainGet(C,F,G)},queryTenants:function(G,D){var E=this;var F=function(){return E.getUri()+"/tenants/query"};var C=this.getFactory().tenantMap(this);var H={};if(D){A.copyInto(H,D)}return this.chainPost(C,F,H,G)},readTenant:function(C){var E=this;var F=function(){return E.getUri()+"/tenants/"+C};var D=this.getFactory().tenant(this);return this.chainGet(D,F)},lookupTenantForPrincipal:function(F){var D=this;var E=function(){return D.getUri()+"/tenants/lookup?id="+F.getDomainQualifiedId()};var C=this.getFactory().tenant(this);return this.chainGet(C,E)},createTenant:function(I,D,C){var F=this;var H=function(){return F.getUri()+"/tenants"};var G={};G.principalId=I.getId();G.domainId=I.getDomainId();G.planKey=D;if(C){G.paymentMethod=C}var E=this.getFactory().tenant(this);return this.chainCreate(E,G,H)},checkTenantPermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/tenants/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})},listPlans:function(D){var E=this;var F=function(){return E.getUri()+"/plans"};var G={};if(D){A.copyInto(G,D)}var C=this.getFactory().planMap(this);return this.chainGet(C,F,G)},queryPlans:function(G,D){var E=this;var F=function(){return E.getUri()+"/plans/query"};var C=this.getFactory().planMap(this);var H={};if(D){A.copyInto(H,D)}return this.chainPost(C,F,H,G)},readPlan:function(F){var D=this;var E=function(){return D.getUri()+"/plans/"+F};var C=this.getFactory().plan(this);return this.chainGet(C,E)},createPlan:function(E){var D=this;var F=function(){return D.getUri()+"/plans"};var C=this.getFactory().plan(this);return this.chainCreate(C,E,F)},checkPlanPermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/plans/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})}})})(window);(function(B){var A=B.Gitana;A.RegistrarMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.RegistrarMap";this.base(C,D)},clone:function(){return this.getFactory().registrarMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().registrar(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.Plan=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Plan";this.getRegistrar=function(){return D};this.getRegistrarId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_PLAN},getUri:function(){return"/registrars/"+this.getRegistrarId()+"/plans/"+this.getId()},clone:function(){return this.getFactory().plan(this.getRegistrar(),this.object)},getPlanKey:function(){return this.get("planKey")}})})(window);(function(B){var A=B.Gitana;A.Tenant=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Tenant";this.getRegistrar=function(){return D};this.getRegistrarId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_TENANT},getUri:function(){return"/registrars/"+this.getRegistrarId()+"/tenants/"+this.getId()},clone:function(){return this.getFactory().tenant(this.getRegistrar(),this.object)},getDnsSlug:function(){return this.get("dnsSlug")},getPlanKey:function(){return this.get("planKey")},getPrincipalId:function(){return this.get("principalId")},getPrincipalDomainId:function(){return this.get("domainId")},getPlatformId:function(){return this.get("platformId")},readTenantPlan:function(){var D=this;var E=function(){return D.getPlatform().getUri()+"/registrars/"+D.getRegistrarId()+"/plans/"+D.getPlanKey()};var C=this.getFactory().plan(this.getRegistrar());return this.chainGet(C,E)},readTenantPrincipal:function(){var D=this;var E=function(){return D.getPlatform().getUri()+"/domains/"+D.getPrincipalDomainId()+"/principals/"+D.getPrincipalId()};var F=this.getFactory().domain(this.getPlatform(),{_doc:this.getPrincipalDomainId()});var C=this.getFactory().domainPrincipal(F);return this.chainGet(C,E)},listAttachments:function(F){var E=this;var D=new A.BinaryAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(F,G,E){var D=this;var C=this.subchain(new A.BinaryAttachment(this,F));C.subchain().then(function(){var H=D.getUri()+"/attachments/"+F;this.chainUpload(this,H,null,G,E).then(function(){this.subchain(D).listAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})},listAllocatedObjects:function(H,D,C){var E=this;var F=function(){return E.getUri()+"/objects"};var G={};if(C){A.copyInto(G,C)}if(D){G.type=D}return this.chainGetResponse(this,F,G).then(function(){H.call(this,this.response.rows)})},listAllocatedRepositoryObjects:function(D,C){return this.listAllocatedObjects(D,"repository",C)},listAllocatedDomainObjects:function(D,C){return this.listAllocatedObjects(D,"domain",C)},listAllocatedVaultObjects:function(D,C){return this.listAllocatedObjects(D,"vault",C)},listAllocatedClientObjects:function(D,C){return this.listAllocatedObjects(D,"client",C)},listAllocatedRegistrarObjects:function(D,C){return this.listAllocatedObjects(D,"registrar",C)},listAllocatedStackObjects:function(D,C){return this.listAllocatedObjects(D,"stack",C)},listAllocatedDirectoryObjects:function(D,C){return this.listAllocatedObjects(D,"directory",C)},listAllocatedApplicationObjects:function(D,C){return this.listAllocatedObjects(D,"application",C)},readDefaultAllocatedClientObject:function(E){var C=this;var D=function(){return C.getUri()+"/defaultclient"};return this.chainGetResponse(this,D,{}).then(function(){var F={};A.copyInto(F,this.response);A.stampInto(F,A.ClientMethods);F.get=function(G){return this[G]};E.call(this,F)})},listAutoClientMappingObjects:function(G,C){var D=this;var E=function(){return D.getUri()+"/autoclientmappings"};var F={};if(C){A.copyInto(F,C)}return this.chainGetResponse(this,E,F).then(function(){G.call(this,this.response.rows)})}})})(window);(function(B){var A=B.Gitana;A.PlanMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.PlanMap";this.getRegistrar=function(){return D};this.getRegistrarId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().planMap(this.getRegistrar(),this.object)},buildObject:function(C){return this.getFactory().plan(this.getRegistrar(),C)}})})(window);(function(B){var A=B.Gitana;A.TenantMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.TenantMap";this.getRegistrar=function(){return D};this.getRegistrarId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().tenantMap(this.getRegistrar(),this.object)},buildObject:function(C){return this.getFactory().tenant(this.getRegistrar(),C)}})})(window);(function(B){var A=B.Gitana;A.Repository=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.Repository"},getType:function(){return A.TypedIDConstants.TYPE_REPOSITORY},getUri:function(){return"/repositories/"+this.getId()},clone:function(){return this.getFactory().repository(this.getPlatform(),this.object)},listBranches:function(D){var F={};if(D){A.copyInto(F,D)}var E=function(){return"/repositories/"+this.getId()+"/branches"};var C=this.getFactory().branchMap(this);return this.chainGet(C,E,F)},readBranch:function(E){var D=function(){return"/repositories/"+this.getId()+"/branches/"+E};var C=this.getFactory().branch(this);return this.chainGet(C,D)},createBranch:function(F,D){var E=function(){return"/repositories/"+this.getId()+"/branches"};var G={changeset:F};var C=this.getFactory().branch(this);return this.chainCreate(C,D,E,G)},queryBranches:function(F,D){var G={};if(D){A.copyInto(G,D)}var E=function(){return"/repositories/"+this.getId()+"/branches/query"};var C=this.getFactory().branchMap(this);return this.chainPost(C,E,G,F)},checkBranchPermissions:function(D,F){var E=function(){return"/repositories/"+this.getId()+"/branches/permissions/check"};var C={checks:D};return this.chainPostResponse(this,E,{},C).then(function(){F.call(this,this.response.results)})},listChangesets:function(){var D=function(){return"/repositories/"+this.getId()+"/changesets"};var C=this.getFactory().changesetMap(this);return this.chainGet(C,D)},readChangeset:function(E){var D=function(){return"/repositories/"+this.getId()+"/changesets/"+E};var C=this.getFactory().changeset(this);return this.chainGet(C,D)},listChangesetParents:function(E){var D=function(){return"/repositories/"+this.getId()+"/changesets/"+E+"/parents"};var C=this.getFactory().changesetMap(this);return this.chainGet(C,D)},listChangesetChildren:function(E){var D=function(){return"/repositories/"+this.getId()+"/changesets/"+E+"/children"};var C=this.getFactory().changesetMap(this);return this.chainGet(C,D)},queryChangesets:function(F,D){var G={};if(D){A.copyInto(G,D)}var E=function(){return"/repositories/"+this.getId()+"/changesets/query"};var C=this.getFactory().changesetMap(this);return this.chainPost(C,E,G,F)},getMaxSize:function(){return this.get("maxSize")},getSize:function(){return this.get("size")},getObjectCount:function(){return this.get("objectcount")}})})(window);(function(B){var A=B.Gitana;A.RepositoryMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.RepositoryMap";this.base(C,D)},clone:function(){return this.getFactory().repositoryMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().repository(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.AbstractNode=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.getRepository=function(){return D.getRepository()};this.getRepositoryId=function(){return D.getRepository().getId()};this.getBranch=function(){return D};this.getBranchId=function(){return D.getId()}},getUri:function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()},clone:function(){return this.getFactory().node(this.getBranch(),this.object)},stats:function(){var C=this.get("stats");if(!C){C={}}return C},getFeatureIds:function(){var C=[];if(this.get("_features")){for(var D in this.get("_features")){C[C.length]=D}}return C},getFeature:function(D){var C=null;if(this.get("_features")){C=this.get("_features")[D]}return C},removeFeature:function(C){if(this.get("_features")){if(this.get("_features")[C]){delete this.get("_features")[C]}}},addFeature:function(D,C){if(!this.get("_features")){this.set("_features",{})}this.get("_features")[D]=C},hasFeature:function(D){var C=false;if(this.get("_features")){C=!A.isEmpty(this.get("_features")[D])}return C},getQName:function(){return this.get("_qname")},getTypeQName:function(){return this.get("_type")},isAssociation:function(){return false},isContainer:function(){return this.hasFeature("f:container")},touch:function(){var C=this;var D=function(){return C.getUri()+"/touch"};return this.chainPost(this.clone(),D)}})})(window);(function(B){var A=B.Gitana;A.NodeAttachment=A.BinaryAttachment.extend({constructor:function(D,C,E){this.base(D,C,E)},getFilename:function(){return this.attachment.filename}})})(window);(function(B){var A=B.Gitana;A.NodeAttachmentMap=A.BinaryAttachmentMap.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.NodeAttachmentMap";this.produce=function(E,F){return new A.NodeAttachment(this.persistable,E,F)}}})})(window);(function(B){var A=B.Gitana;A.Association=A.AbstractNode.extend({constructor:function(D,C){this.base(D,C);this.objectType="Gitana.Association"},getType:function(){return A.TypedIDConstants.TYPE_ASSOCIATION},isAssociation:function(){return true},getDirectionality:function(){return this.get("directionality")},getSourceNodeId:function(){return this.get("source")},getSourceNodeChangesetId:function(){return this.get("source_changeset")},getSourceNodeType:function(){return this.get("source_type")},getTargetNodeId:function(){return this.get("target")},getTargetNodeChangesetId:function(){return this.get("target_changeset")},getTargetNodeType:function(){return this.get("target_type")},readSourceNode:function(){var D=this;var C=this.getFactory().node(this.getBranch());return this.subchain(C).then(function(){var E=this;this.subchain(D.getBranch()).readNode(D.getSourceNodeId()).then(function(){C.loadFrom(this)})})},readTargetNode:function(){var D=this;var C=this.getFactory().node(this.getBranch());return this.subchain(C).then(function(){var E=this;this.subchain(D.getBranch()).readNode(D.getTargetNodeId()).then(function(){C.loadFrom(this)})})},readOtherNode:function(E){var D=this;var F=null;if(A.isString(E)){F=E}else{F=E.getId()}var C=this.subchain(this.getFactory().node(this.getBranch()));C.subchain(D).then(function(){if(F==this.getSourceNodeId()){this.readTargetNode().then(function(){C.loadFrom(this)})}else{if(F==this.getTargetNodeId()){this.readSourceNode().then(function(){C.loadFrom(this)})}else{var G=new A.Error();G.name="No node on association";G.message="The node: "+F+" was not found on this association";this.error(G);return false}}});return C},getDirection:function(C){var E=null;if(A.isString(C)){E=C}else{E=C.getId()}var D=null;if(this.getDirectionality()=="UNDIRECTED"){D="MUTUAL"}else{if(this.getSourceNodeId()==E){D="OUTGOING"}else{if(this.getTargetNodeId()==E){D="INCOMING"}}}return D},getOtherNodeId:function(D){var E=null;if(A.isString(D)){E=D}else{E=D.getId()}var C=null;if(this.getSourceNodeId()==E){C=this.getTargetNodeId()}else{if(this.getTargetNodeId()==E){C=this.getSourceNodeId()}}return C}})})(window);(function(B){var A=B.Gitana;A.Branch=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Branch";this.getRepository=function(){return D};this.getRepositoryId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_BRANCH},getUri:function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getId()},clone:function(){return this.getFactory().branch(this.getRepository(),this.object)},del:function(){return this},isMaster:function(){return(this.getBranchType().toLowerCase()=="master")},getBranchType:function(){return this.get("type")},getTip:function(){return this.get("tip")},listMounts:function(D){var E=this;var G={};if(D){A.copyInto(G,D)}var F=function(){return E.getUri()+"/nodes"};var C=this.getFactory().nodeMap(this);return this.chainGet(C,F,G)},readNode:function(F){var D=this;var E=function(){return D.getUri()+"/nodes/"+F};var C=this.getFactory().node(this);return this.chainGet(C,E)},rootNode:function(){return this.readNode("root")},createNode:function(E){var D=this;var F=function(){return D.getUri()+"/nodes"};var C=this.getFactory().node(this);return this.chainCreate(C,E,F)},searchNodes:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}if(A.isString(G)){G={search:G}}var F=function(){return E.getUri()+"/nodes/search"};var C=this.getFactory().nodeMap(this);return this.chainPost(C,F,H,G)},queryNodes:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/nodes/query"};var C=this.getFactory().nodeMap(this);return this.chainPost(C,F,H,G)},checkNodePermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/nodes/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})},readPersonNode:function(E,F){var D=this;var H=this.extractPrincipalDomainQualifiedId(E);var G=function(){var I=D.getUri()+"/person/acquire?id="+H;if(F){I+="&createIfNotFound="+F}return I};var C=this.getFactory().node(this,"n:person");return this.chainGet(C,G)},readGroupNode:function(H,E){var D=this;var G=this.extractPrincipalDomainQualifiedId(H);var F=function(){var I=D.getUri()+"/group/acquire?id="+G;if(E){I+="&createIfNotFound="+E}return I};var C=this.getFactory().node(this,"n:group");return this.chainGet(C,F)},listDefinitions:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){var I=E.getUri()+"/definitions";if(G){I=I+"?filter="+G}return I};var C=this.getFactory().nodeMap(this);return this.chainGet(C,F,H)},readDefinition:function(F){var D=this;var E=function(){return D.getUri()+"/definitions/"+F};var C=this.getFactory().definition(this);return this.chainGet(C,E)},generateQName:function(D,E){var C=this;return this.then(function(){var F=this;var G=C.getUri()+"/qnames/generate";C.getDriver().gitanaPost(G,null,D,function(H){var I=H._qname;E.call(F,I);F.next()});return false})},associate:function(F,G,D){var E=null;if(A.isString(F)){E=F}else{E=F.getId()}var H=null;if(A.isString(G)){H=G}else{H=G.getId()}var C=this.subchain(this);C.subchain(this).then(function(){this.readNode(E).associate(H,D)});return C},traverse:function(D,C){var E=null;if(A.isString(D)){E=D}else{E=D.getId()}return this.readNode(E).traverse(C)},createContainer:function(C){if(!C){C={}}if(!C._system){C._system={}}if(!C._system["_features"]){C._system["_features"]={}}C._system["_features"]["f:container"]={active:"true"};return this.createNode(C)},find:function(F,D){var E=this;var H={};if(D){A.copyInto(H,D)}var G=function(){return E.getUri()+"/nodes/find"};var C=this.getFactory().nodeMap(this);return this.chainPost(C,G,H,F)},listItems:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/lists/"+G+"/items"};var C=this.getFactory().nodeMap(this);return this.chainGet(C,F,D)},queryItems:function(G,H,D){var E=this;var I={};if(D){A.copyInto(I,D)}var F=function(){return E.getUri()+"/lists/"+G+"/items/query"};var C=this.getFactory().nodeMap(this);return this.chainPost(C,F,I,H)}})})(window);(function(B){var A=B.Gitana;A.Changeset=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Changeset";this.getRepository=function(){return D};this.getRepositoryId=function(){return D.getId()};this.getPlatform=function(){return D.getPlatform()}},getType:function(){return A.TypedIDConstants.TYPE_CHANGESET},getUri:function(){return"/repositories/"+this.getRepositoryId()+"/changesets/"+this.getId()},clone:function(){return this.getFactory().changeset(this.getRepository(),this.object)},listNodes:function(D){var F={};if(D){A.copyInto(F,D)}var E=function(){return"/repositories/"+this.getRepositoryId()+"/changesets/"+this.getId()+"/nodes"};var C=this.getFactory().nodeMap(this);return this.chainGet(C,E,F)}})})(window);(function(B){var A=B.Gitana;A.Node=A.AbstractNode.extend({constructor:function(D,C){this.base(D,C);this.objectType="Gitana.Node"},getType:function(){return A.TypedIDConstants.TYPE_NODE},listChildren:function(D){var F={};if(D){A.copyInto(F,D)}var E=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/children"};var C=this.getFactory().nodeMap(this.getBranch());return this.chainGet(C,E,F)},listRelatives:function(E,D){var G=null;var H=null;if(E){G=E.type;if(E.direction){H=E.direction.toUpperCase()}}var I={};if(D){A.copyInto(I,D)}var F=function(){var J="/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/relatives";if(G){J=J+"?type="+G}if(H){if(G){J=J+"&direction="+H}else{J=J+"?direction="+H}}return J};var C=this.getFactory().nodeMap(this.getBranch());return this.chainGet(C,F,I)},associations:function(E,D){var G=null;var H=null;if(E){G=E.type;if(E.direction){H=E.direction.toUpperCase()}}var I={};if(D){A.copyInto(I,D)}var F=function(){var J="/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/associations?a=1";if(G){J=J+"&type="+G}if(H){J=J+"&direction="+H}return J};var C=this.getFactory().nodeMap(this.getBranch());return this.chainGet(C,F,I)},incomingAssociations:function(E,C){var D={direction:"INCOMING"};if(E){D.type=E}return this.associations(D,C)},outgoingAssociations:function(E,C){var D={direction:"OUTGOING"};if(E){D.type=E}return this.associations(D,C)},associate:function(F,D,C){if(!A.isString(F)){F=F.getId()}if(D){if(A.isString(D)){D={_type:D}}}var E=function(){var G="/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/associate?node="+F;if(C){G+="&directionality=UNDIRECTED"}return G};return this.chainPostEmpty(this,E,null,D)},associateOf:function(G,F,E){var D=this;var C=this.subchain(this);C.subchain(G).then(function(){this.associate(D,F,E)});return C},unassociate:function(F,E,C){if(!A.isString(F)){F=F.getId()}var D=function(){var G="/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/unassociate?node="+F;if(E){G=G+"&type="+E}if(C){G+="&directionality=UNDIRECTED"}return G};return this.chainPostEmpty(this,D)},traverse:function(D){var H=this;var F={traverse:D};var E=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/traverse"};var C=this.getFactory().traversalResults(this.getBranch());var G={};return this.chainPost(C,E,G,F)},mount:function(D){var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/mount/"+D};return this.chainPostEmpty(this,C,null,object)},unmount:function(){var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/unmount"};return this.chainPostEmpty(this,C,null,object)},lock:function(){var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/lock"};return this.chainPostEmpty(this,C)},unlock:function(){var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/unlock"};return this.chainPostEmpty(this,C)},checkLocked:function(C){return this.subchain(this).then(function(){var D=this;var E="/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/lock";this.getDriver().gitanaGet(E,null,function(F){C.call(D,F.locked);D.next()});return false})},loadACL:function(E){var C=this;var D=function(){return C.getUri()+"/acl/list"};return this.chainGetResponse(this,D).then(function(){E.call(this,this.response)})},listAuthorities:function(E){var D=this.extractPrincipalDomainQualifiedId(E);var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/acl?id="+D};return this.chainGetResponseRows(this,C)},checkAuthority:function(F,D,G){var E=this.extractPrincipalDomainQualifiedId(F);var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/authorities/"+D+"/check?id="+E};return this.chainPostResponse(this,C).then(function(){G.call(this,this.response.check)})},grantAuthority:function(F,D){var E=this.extractPrincipalDomainQualifiedId(F);var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/authorities/"+D+"/grant?id="+E};return this.chainPostEmpty(this,C)},revokeAuthority:function(F,D){var E=this.extractPrincipalDomainQualifiedId(F);var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/authorities/"+D+"/revoke?id="+E};return this.chainPostEmpty(this,C)},revokeAllAuthorities:function(C){return this.revokeAuthority(C,"all")},loadAuthorityGrants:function(D,E){if(!D){D=[]}var C={principals:D};return this.chainPostResponse(this,"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/authorities",{},C).then(function(){E.call(this,this.response)})},checkPermission:function(F,C,G){var E=this.extractPrincipalDomainQualifiedId(F);var D=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/permissions/"+C+"/check?id="+E};return this.chainPostResponse(this,D).then(function(){G.call(this,this.response.check)})},listAuditRecords:function(D){var F={};if(D){A.copyInto(F,D)}var E=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/auditrecords"};var C=this.getFactory().auditRecordMap(this.getRepository());return this.chainGet(C,E,F)},createTranslation:function(G,C,E){var F=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/i18n?edition="+G+"&locale="+C};var D=this.getFactory().node(this.getBranch());return this.chainCreate(D,E,F)},editions:function(D){var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/i18n/editions"};return this.chainGetResponse(this,C).then(function(){D.call(this,this.response.editions)})},locales:function(D,E){var C=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/i18n/locales?edition="+D};return this.chainGetResponse(this,C).then(function(){E.call(this,this.response.locales)})},readTranslation:function(){var G;var C;var E=A.makeArray(arguments);if(E.length==1){C=E.shift()}else{if(E.length>1){G=E.shift();C=E.shift()}}var F=function(){var H="/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/i18n?locale="+C;if(G){H+="&edition="+G}return H};var D=this.getFactory().node(this.getBranch());return this.chainGet(D,F)},listAttachments:function(F){var E=this;var D=new A.NodeAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(G,H,F,E){var D=this;if(!G){G="default"}var C=this.subchain(new A.NodeAttachment(this,G));C.subchain().then(function(){var J={};if(E){J.filename=E}var I=D.getUri()+"/attachments/"+G;this.chainUpload(this,I,J,H,F).then(function(){this.subchain(D).listAttachments().select(G).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})},createChild:function(C){return this.subchain(this.getBranch()).createNode(C).childOf(this)},childOf:function(C){return this.associateOf(C,"a:child")},find:function(E,D){var G={};if(D){A.copyInto(G,D)}var F=function(){return"/repositories/"+this.getRepositoryId()+"/branches/"+this.getBranchId()+"/nodes/"+this.getId()+"/find"};var C=this.getFactory().nodeMap(this.getBranch());return this.chainPost(C,F,G,E)}})})(window);(function(B){var A=B.Gitana;A.BranchMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.BranchMap";this.getRepository=function(){return D};this.getRepositoryId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().branchMap(this.getRepository(),this.object)},buildObject:function(C){return this.getFactory().branch(this.getRepository(),C)}})})(window);(function(B){var A=B.Gitana;A.ChangesetMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.ChangesetMap";this.getRepository=function(){return D};this.getRepositoryId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().changesetMap(this.getRepository(),this.object)},buildObject:function(C){return this.getFactory().changeset(this.getRepository(),C)}})})(window);(function(B){var A=B.Gitana;A.NodeMap=A.AbstractMap.extend({constructor:function(D,C){this.objectType="Gitana.NodeMap";this.getRepository=function(){return D.getRepository()};this.getRepositoryId=function(){return D.getRepository().getId()};this.getBranch=function(){return D};this.getBranchId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().nodeMap(this.getBranch(),this.object)},buildObject:function(C){return this.getFactory().node(this.getBranch(),C)}})})(window);(function(B){var A=B.Gitana;A.TraversalResults=A.AbstractPersistable.extend({constructor:function(D,C){if(!this._nodes){this._nodes={}}if(!this._associations){this._associations={}}if(!this._config){this._config={}}this.base(D.getDriver(),C);this.getRepository=function(){return D.getRepository()};this.getRepositoryId=function(){return D.getRepository().getId()};this.getBranch=function(){return D};this.getBranchId=function(){return D.getId()}},clear:function(){for(var C in this._nodes){if(this._nodes.hasOwnProperty(C)){delete this._nodes[C]}}for(var C in this._associations){if(this._associations.hasOwnProperty(C)){delete this._associations[C]}}for(var C in this._config){if(this._config.hasOwnProperty(C)){delete this._config[C]}}},handleResponse:function(C){this.base(C);this.clear();A.copyInto(this._nodes,C.nodes);A.copyInto(this._associations,C.associations);A.copyInto(this._config,C.config);this._config.center=C.node},center:function(){var D=this.getFactory().node(this.getBranch());var C=this.subchain(D);C.subchain(this.getBranch()).readNode(this._config.center).then(function(){C.handleResponse(this.object)});return C},nodeCount:function(C){return this.then(function(){C.call(this,A.getNumberOfKeys(this._nodes))})},associationCount:function(C){return this.then(function(){C.call(this,A.getNumberOfKeys(this._associations))})},nodes:function(){var D=this;var C=this.subchain(this.getFactory().nodeMap(this.getBranch()));C.subchain().then(function(){var E={rows:D._nodes};C.handleResponse(E)});return C},node:function(E){var D=this;var C=this.subchain(this.getFactory().node(this.getBranch()));C.subchain(D).then(function(){this.nodes().then(function(){var F=this.get(E);if(F){C.handleResponse(F.object)}else{return D.missingNodeError(E)}})});return C},associations:function(){var D=this;var C=this.subchain(this.getFactory().nodeMap(this.getBranch()));C.subchain().then(function(){var E={rows:D._associations};C.handleResponse(E)});return C},association:function(E){var D=this;var C=this.subchain(this.getFactory().association(this.getBranch()));C.subchain().then(function(){this.associations().then(function(){var F=this.get(E);if(F){C.handleResponse(F.object)}else{return D.missingNodeError(E)}})});return C}})})(window);(function(B){var A=B.Gitana;A.Definition=A.Node.extend({constructor:function(D,C){this.base(D,C);this.objectType="Gitana.Definition"},listFormAssociations:function(){var D=this;var E=function(){return D.getUri()+"/forms"};var C=this.getFactory().nodeMap(this.getBranch());return this.chainGet(C,E)},readForm:function(F){var D=this;var E=function(){return D.getUri()+"/forms/"+F};var C=this.getFactory().form(this.getBranch());return this.chainGet(C,E)},createForm:function(F,G){var E=this;if(!G){G={}}G._type="n:form";var D=this.getFactory().form(this.getBranch());var C=this.subchain(D);C.subchain(this.getBranch()).createNode(G).then(function(){var H=this;this.subchain(E).then(function(){var I={_type:"a:has_form","form-key":F};this.associate(H,I).then(function(){var J=this;var K="/repositories/"+H.getRepositoryId()+"/branches/"+H.getBranchId()+"/nodes/"+H.getId();this.getDriver().gitanaGet(K,null,function(L){C.handleResponse(L);J.next()});return false})})});return C},removeFormAssociation:function(C){return this.link(this).then(function(){var D=null;this.listFormAssociations().each(function(){if(this.getFormKey()==C){D=this}}).then(function(){if(D){this.subchain(D).del()}})})}});A.ObjectFactory.register("d:type",A.Definition);A.ObjectFactory.register("d:feature",A.Definition);A.ObjectFactory.register("d:association",A.Definition)})(window);(function(B){var A=B.Gitana;A.Form=A.Node.extend({constructor:function(D,C){this.base(D,C);this.objectType="Gitana.Form"},getEngineId:function(){return this.get("engineId")},setEngineId:function(C){this.set("engineId",C)}});A.ObjectFactory.register("n:form",A.Form)})(window);(function(B){var A=B.Gitana;A.HasFormAssociation=A.Association.extend({constructor:function(D,C){this.base(D,C);this.objectType="Gitana.HasFormAssociation"},getFormKey:function(){return this.get("form-key")},setFormKey:function(C){this.set("form-key",C)}});A.ObjectFactory.register("a:has_form",A.HasFormAssociation)})(window);(function(B){var A=B.Gitana;A.HasTranslationAssociation=A.Association.extend({constructor:function(D,C){this.base(D,C);this.objectType="Gitana.HasTranslationAssociation"},getLocale:function(){return this.get("locale")},setLocale:function(C){this.set("locale",C)},getEdition:function(){return this.get("edition")},setEdition:function(C){this.set("edition",C)}});A.ObjectFactory.register("a:has_translation",A.HasTranslationAssociation)})(window);(function(B){var A=B.Gitana;A.Person=A.Node.extend({constructor:function(D,C){this.base(D,C);this.objectType="Gitana.Person"},getPrincipalName:function(){return this.get("principal-name")},getPrincipalType:function(){return this.get("principal-type")},getPrincipalId:function(){return this.get("principal-id")},getPrincipalDomainId:function(){return this.get("principal-domain")},readPrincipal:function(){return this.subchain(this.getPlatform()).readDomain(this.getPrincipalDomainId()).readPrincipal(this.getPrincipalId())},getFirstName:function(){return this.get("firstName")},setFirstName:function(C){this.set("firstName",C)},getLastName:function(){return this.get("lastName")},setLastName:function(C){this.set("lastName",C)},getCompanyName:function(){return this.get("companyName")},setCompanyName:function(C){this.set("companyName",C)},getEmail:function(){return this.get("email")},setEmail:function(C){this.set("email",C)},getJobTitle:function(){return this.get("jobTitle")},setJobTitle:function(C){this.set("jobTitle",C)},getAddress:function(){return this.get("address")},setAddress:function(C){this.set("address",C)},getCity:function(){return this.get("city")},setCity:function(C){this.set("city",C)},getState:function(){return this.get("state")},setState:function(C){this.set("state",C)},getZipcode:function(){return this.get("zipcode")},setZipcode:function(C){this.set("zipcode",C)},getPhoneNumber:function(){return this.get("phoneNumber")},setPhoneNumber:function(C){this.set("phoneNumber",C)}});A.ObjectFactory.register("n:person",A.Person)})(window);(function(B){var A=B.Gitana;A.Vault=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.base(C,D);this.objectType="Gitana.Vault"},getType:function(){return A.TypedIDConstants.TYPE_VAULT},getUri:function(){return"/vaults/"+this.getId()},clone:function(){return this.getFactory().vault(this.getPlatform(),this.object)},listArchives:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().archiveMap(this);return this.chainGet(C,this.getUri()+"/archives",E)},readArchive:function(D){var C=this.getFactory().archive(this);return this.chainGet(C,this.getUri()+"/archives/"+D)},lookupArchive:function(E,F,D){var C=this.getFactory().archive(this);return this.chainGet(C,this.getUri()+"/archives/lookup?group="+E+"&artifact="+F+"&version="+D)},queryArchives:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/archives/query"};var C=this.getFactory().archiveMap(this);return this.chainPost(C,F,H,G)},checkArchivePermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/archives/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})}})})(window);(function(B){var A=B.Gitana;A.VaultMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.VaultMap";this.base(C,D)},clone:function(){return this.getFactory().vaultMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().vault(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.Archive=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.Archive";this.getVault=function(){return D};this.getVaultId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_ARCHIVE},getUri:function(){return"/vaults/"+this.getVaultId()+"/archives/"+this.getId()},getDownloadUri:function(){return this.getProxiedUri()+"/download"},listAttachments:function(F){var E=this;var D=new A.BinaryAttachmentMap(this);var C=this.subchain(D);if(!F){C.subchain().then(function(){var I=this;E.getDriver().gitanaGet(E.getUri()+"/attachments",null,function(J){var L={};for(var K=0;K<J.rows.length;K++){L[J.rows[K]["_doc"]]=J.rows[K]}D.handleMap(L);I.next()});return false})}else{var G=this.getSystemMetadata()._system.attachments;var H={};A.copyInto(H,G);D.handleMap(H)}return C},attachment:function(C){return this.listAttachments().select(C)},attach:function(F,G,E){var D=this;var C=this.subchain(new A.BinaryAttachment(this,F));C.subchain().then(function(){var H=D.getUri()+"/attachments/"+F;this.chainUpload(this,H,null,G,E).then(function(){this.subchain(D).listAttachments().select(F).then(function(){C.handleAttachment(this.attachment)})})});return C},unattach:function(C){return this.subchain().then(function(){this.chainDelete(this,this.getUri()+"/attachments/"+C).then(function(){})})}})})(window);(function(B){var A=B.Gitana;A.ArchiveMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.ArchiveMap";this.getVault=function(){return D};this.getVaultId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().archiveMap(this.getVault(),this.object)},buildObject:function(C){return this.getFactory().archive(this.getVault(),C)}})})(window);(function(B){var A=B.Gitana;A.WebHost=A.AbstractPlatformDataStore.extend({constructor:function(C,D){this.objectType="Gitana.WebHost";this.base(C,D)},getUri:function(){return"/webhosts/"+this.getId()},getType:function(){return A.TypedIDConstants.TYPE_WEB_HOST},clone:function(){return this.getFactory().webHost(this.getPlatform(),this.object)},getUrlPatterns:function(){return this.get("urlPatterns")},createAutoClientMapping:function(F,G,E,D){if(!D){D={}}if(!A.isString(G)){G=G.getId()}if(!A.isString(E)){E=E.getKey()}D.uri=F;D.applicationId=G;D.clientKey=E;var C=this.getFactory().autoClientMapping(this);return this.chainCreate(C,D,this.getUri()+"/autoclientmappings")},listAutoClientMappings:function(D){var E={};if(D){A.copyInto(E,D)}var C=this.getFactory().autoClientMappingMap(this);return this.chainGet(C,this.getUri()+"/autoclientmappings",E)},readAutoClientMapping:function(C){var D=this.getFactory().autoClientMapping(this);return this.chainGet(D,this.getUri()+"/autoclientmappings/"+C)},queryAutoClientMappings:function(G,D){var E=this;var H={};if(D){A.copyInto(H,D)}var F=function(){return E.getUri()+"/autoclientmappings/query"};var C=this.getFactory().autoClientMappingMap(this);return this.chainPost(C,F,H,G)},checkAutoClientMappingsPermissions:function(E,G){var C=this;var F=function(){return C.getUri()+"/autoclientmappings/permissions/check"};var D={checks:E};return this.chainPostResponse(this,F,{},D).then(function(){G.call(this,this.response.results)})}})})(window);(function(B){var A=B.Gitana;A.WebHostMap=A.AbstractPlatformObjectMap.extend({constructor:function(C,D){this.objectType="Gitana.WebHostMap";this.base(C,D)},clone:function(){return this.getFactory().webHostMap(this.getPlatform(),this.object)},buildObject:function(C){return this.getFactory().webHost(this.getPlatform(),C)}})})(window);(function(B){var A=B.Gitana;A.AutoClientMapping=A.AbstractPlatformObject.extend({constructor:function(D,C){this.base(D.getPlatform(),C);this.objectType="Gitana.AutoClientMapping";this.getWebHost=function(){return D};this.getWebHostId=function(){return D.getId()}},getType:function(){return A.TypedIDConstants.TYPE_AUTO_CLIENT_MAPPING},getUri:function(){return"/webhosts/"+this.getWebHostId()+"/autoclientmappings/"+this.getId()},getSourceUri:function(){return this.get("uri")},getTargetApplicationId:function(){return this.get("applicationId")},getTargetClientKey:function(){return this.get("clientKey")},getTargetTenantId:function(){return this.get("tenantId")},getAutoManage:function(){return this.get("automanage")}})})(window);(function(B){var A=B.Gitana;A.AutoClientMappingMap=A.AbstractPlatformObjectMap.extend({constructor:function(D,C){this.objectType="Gitana.AutoClientMappingMap";this.getWebHost=function(){return D};this.getWebHostId=function(){return D.getId()};this.base(D.getPlatform(),C)},clone:function(){return this.getFactory().autoClientMappingMap(this.getWebHost(),this.object)},buildObject:function(C){return this.getFactory().autoClientMapping(this.getWebHost(),C)}})})(window);(function(B){var A=B.Gitana;A.Context=A.Chainable.extend({constructor:function(C){this.base(new A(C.driver?C.driver:{}));if(!this.cache){this.cache={}}this.cache.repository=null;this.cache.branch=null;this.cache.platform=null;this.getConfigs=function(){return C};this.getRepositoryConfigs=function(){var D=C.repository;if(typeof D=="string"){D={repository:D}}return D};this.getBranchConfigs=function(){var D=C.branch?C.branch:"master";if(typeof D=="string"){if(D=="master"){D={type:"MASTER"}}else{D={_doc:D}}}return D};this.getUserConfigs=function(){return C.user};this.getDriverConfigs=function(){return C.driver}},platform:function(C){if(C||C===null){this.cache.platform=C}return this.cache.platform?Chain(this.cache.platform):null},repository:function(C){if(C||C===null){this.cache.repository=C}return this.cache.repository?Chain(this.cache.repository):null},branch:function(C){if(C||C===null){this.cache.branch=C}return this.cache.branch?Chain(this.cache.branch):null},init:function(){var F=this;var E=function(H,I){if(!F.platform()){var J=F.getConfigs()["authentication"];F.getDriver().authenticate(J,function(K){if(I){I({message:"Failed to login Gitana.",reason:"INVALID_LOGIN",error:K})}}).then(function(){F.platform(this);D(H,I)})}else{D(H,I)}};var D=function(H,I){if(!F.repository()){F.platform().trap(function(J){if(I){I({message:"Failed to get repository",error:J})}}).queryRepositories(F.getRepositoryConfigs()).count(function(J){if(I){if(J==0){I({message:"Cannot find any repository"})}if(J>1){I({message:"Found more than one repository"})}}}).keepOne().then(function(){F.repository(this);G(H,I)})}else{G(H,I)}};var G=function(H,I){if(!F.branch()){F.repository().trap(function(J){if(I){I({message:"Failed to get branch",error:J})}}).queryBranches(F.getBranchConfigs()).count(function(J){if(I){if(J==0){I({message:"Cannot find any branch"})}if(J>1){I({message:"Found more than one branch"})}}}).keepOne().then(function(){F.branch(this);H.call()})}else{H.call()}};var C=Chain(this);return C.subchain().then(function(){var H=this;E(function(){H.next()},function(J){var I=F.getConfigs()["error"];if(I){I.call(F,J)}});return false})}});A.Context.create=function(C){var D=new A.Context(C);return D.init()}})(window);
